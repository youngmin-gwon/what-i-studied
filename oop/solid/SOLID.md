# SOLID

- 작가 미상의 명언

> 객체에게 데이터를 요구하지 말고 작업을 요청해라

- 초보가 힘든 것
    - 무엇을 객체화 할 것인가?
    - 위의 명언에서 얻어갈 수 있는 힌트 ⇒ 작업(기능)을 하는 것을 객체로 잡아보는 건 어떤가?
- 객체에게 데이터를 요구하는 행위는 객체화를 손상시키는 행동일 수 있으니 다시 한번 생각해보자 ⇒ 데이터는 감춰라
- 들어가기 전에 알고 가야하는 것
    - OOP를 이야기할 때 빠질 수 없는 이야기 ⇒ 유지보수성
    - 유지보수성 vs 성능
        - 유지보수성에 손을 들어줄 수 밖에 없음
        - 소프트웨어는 빠르게 대응해야하는 것이 숙명이기 때문
    - SOLID는 유지보수성에 철저히 관점이 맞춰져 있음

## Type

1. [[SRP(Single Responsibility Principle)]]
2. [[OCP(Open Closed Principle)]]

# 3. LSP

- 프로그램의 정확성을 깨지 않으면서 하위 타입의 인스턴스로 바꿀수 있어야한다
- 하위 타입은 언제나 기반 타입과 호환될 수 있어야 함. 즉 **서브 타입은 기반 타입과 약속한 규약**(public interface, method exception)**을 지켜야 함**
- 상위 타입 클래스 자리에 하위 타입 인스턴스로 바꾸더라도 문제가 생기지 않아야 한다
- **다형성**을 지원하기 위한 원칙
- 인터페이스를 구현한 구현체는 믿고 사용하려면 LSP가 필요하다
- 상속에 관한 중요한 이야기
    - 상속은 구현상속(extends) 이든 인터페이스 상속(implements) 이든 궁극적으로는 다형성을 통한 확장성 획득을 목표로 함
    - LSP원리도 역시 서브 클래스가 확장에 대한 인터페이스를 준수해야 함을 의미
    - 다형성과 확장성을 극대화 하려면 하위 클래스를 사용하는 것보다는 상위 클래스(인터페이스)를 사용하는 것이 좋음
    - 일반적으로 선언은 기반 클래스로 생성은 구체 클래스로 대입하는 방법을 사용
    - 생성 시점에서 구체 클래스를 노출시키기 꺼려지는 경우 생성 부분을 Abstract Factory 등의 패턴을 사용하여 유연성을 높일 수 있음
    - 상속을 통한 재사용은 기반 클래스와 서브 클래스 사이에 IS-A 관계가 있을 경우로만 제한 되어야 함
        - 그 외의 경우에는 합성(composition)을 이용한 재사용을 해야함
- 상속은 다형성과 따로 생각할 수 없음
    - 다형성으로 인한 확장효과를 얻기 위해서는 서브 클래스가 기반 클래스와 클라이언트 간의 규약(인터페이스)을 어겨서는 안됨
    - 결국 이 구조는 다형성을 통한 확장 원리인 OCP를 제공하게 됨
    - 따라서, LSP는 OCP를 구성하는 구조가 됨
    - 객체지향 설계 원리는 이렇게 서로가 서로를 이용하기도 하고 포함하기도 하는 특징을 가짐

# 4. ISP

- 자신이 사용하지 않는 인터페이스는 구현하지 말아야 한다는 원리
- 즉, 어떤 클래스가 다른 클래스에 종속될 때에는 가능한 최소한의 인터페이스만을 사용해야 함
- ‘하나의 일반적인 인터페이스 보다는, 여러 개의 구체적인 인터페이스가 낫다’
- SRP가 클래스의 단일책임 원칙을 강조한다면 ISP는 **인터페이스의 단일책임** 을 강조함
- 대전제!
    - 반드시 핵심이 되는 root interface는 원칙이므로 특수한 경우가 아니면 바뀌지 않아야한다. 이를 바꾸게 되면 코드를 무더기로 바꿔야하는 경우가 발생하게 됨
- 객체를 구현하는 것으로 일반적으로 class을 사용하지만, 객체지향의 개념에서 이것이 꼭 class 일 필요는 없음
    - class 형태를 띈 모듈이어도 상관 없음 → 인터페이스로 생각해보자
    - 하나의 인터페이스를 약간씩 다른 방법으로 사용하는 클라이언트가 여러 개 있을 때 이를 하나의 인터페이스로 가지지말고 여러개의 인터페이스로 나눠서 각각의 책임에 맞춰서 사용하자

# 5. DIP

- 구체화가 아니라 추상화(역할)에 의존해야 한다는 원칙 ⇒ 구현 클래스가 아니라 인터페이스에 의존해야함
- 예시
    - 연극은 특정 배우를 염두에 두고 기획되는 것 보다는 배역에 집중되서 기획되어야 한다
- 하위 레벨의 변경이 상위 레벨 모듈의 변경을 요구하는 위계관계를 끊는 의미 역전
- 추상을 매개로 메시지를 주고 받음으로써 관계를 느슨하게 만드는 원칙
- 키워드
    1. IoC
    2. 훅 메소드
    3. 확장성
    - 이 세 가지를 이용해서 컴포넌트 간의 커뮤니케이션을 효율적이게 함

# 추가 내용

- SOLID가 매우 추상적, 관념적으로 보임
- OOP에 접근하는 방법
    1. 다음 세 가지는 무조건 분할해서 객체화 해보자
        - Data 자료를 다루는 부분
        - UI
        - 나머지
            - 환경
            - 제어 체계
            - 비즈니스 로직
    2. 상속 할 때는 다음과 같은 점을 주의 해보자
        - 확장이라는 관점에서 쓸 고민을 하자
        - 하면 안되는 경우
            - 순수한 기능을 가지고 있는데 또 상속을 하는 경우
            - 파생에 파생이 또 나오는 것은 자제 해야함
                - 합성(HAS-A)으로 끝날 일이 아닌지 고민해보자
        - 상속을 함부로 남발해서 안됨
    3. (객체) 사용자 코드를 변경해서는 안됨