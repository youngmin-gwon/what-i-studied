# 셸 스크립팅 (Linux Master 대비)

## 1. 셸의 종류 및 특징
리눅스에서 사용되는 주요 셸의 종류와 특징입니다.

| 셸 (Shell) | 특징 및 설명 |
| :--- | :--- |
| **Bourne Shell (sh)** | 1977년 스티븐 본(Stephen Bourne)이 개발한 유닉스 버전 7의 기본 셸입니다. |
| **bash (Bourne Again Shell)** | GNU 프로젝트를 위해 브라이언 폭스가 개발했습니다. 리눅스의 표준 셸로, sh와 호환되며 명령 히스토리, 별칭(Alias), 명령 행 편집 등을 지원합니다. |
| **C Shell (csh)** | 1978년 빌 조이가 C언어 문법을 기반으로 개발했습니다. 히스토리, 별칭, 작업 제어 기능을 포함하나 명령 행 편집은 지원하지 않습니다. |
| **tcsh** | 켄 그리어(Ken Greer)가 C Shell의 기능을 확장하여(The enhanced C shell) 개발했습니다. 명령어 완성, 편집 기능을 추가했습니다. |
| **ksh (Korn Shell)** | 데이비드 콘(David Korn)이 개발했으며 C 셸의 기능(작업 제어, 히스토리 등)을 포함합니다. |
| **dash** | 데비안(Debian) 계열 리눅스에서 /bin/sh로 사용되는 가벼운 셸입니다. 스크립트 실행 속도가 빠릅니다. |

## 2. 셸 환경 설정 파일
로그인 시 셸 환경을 설정하기 위해 읽어들이는 파일들의 종류와 역할입니다.

| 파일 경로 | 적용 대상 | 설명 |
| :--- | :--- | :--- |
| `/etc/profile` | 전체 사용자 | 시스템 전체에 적용되는 환경 변수와 시작 관련 프로그램을 설정합니다. |
| `/etc/bashrc` | 전체 사용자 | 시스템 전체에 적용되는 **별칭(alias)**과 함수를 설정합니다. |
| `~/.bash_profile` | 개별 사용자 | 개인 사용자의 환경 설정과 시작 프로그램을 설정합니다(PATH 등). 로그인 시 읽어들입니다. |
| `~/.bashrc` | 개별 사용자 | 개인 사용자가 정의한 **별칭(alias)**과 함수가 있는 파일입니다. |
| `~/.bash_logout` | 개별 사용자 | 사용자가 로그아웃할 때 수행하는 설정을 저장합니다. |

## 3. Alias (별칭) 관리 및 예시
사용자가 명령어를 편리하게 줄여 쓰거나 옵션을 기본값으로 지정할 때 사용하는 기능입니다.

| 구분 | 명령어/설정 | 설명 및 예시 |
| :--- | :--- | :--- |
| **Alias 지정** | `alias 별칭='명령어'` | 특정 명령어를 별칭으로 지정합니다. |
| **Alias 해제** | `unalias 별칭` | 지정된 별칭을 해제합니다. (-a 옵션은 모든 alias 해제) |
| **예시 1** | `alias ls='ls -alF'` | ls 입력 시 파일의 속성, 링크 등을 포함하여 자세히 출력하고 파일 종류를 표시합니다. |
| **예시 2** | `alias aaa='ls -alF'` | aaa라는 사용자 정의 명령어로 ls -alF 기능을 수행합니다. |
| **예시 3** | `alias bbb='ls ; pwd'` | bbb 입력 시 ls 실행 후 pwd를 순차적으로 실행합니다. |
| **예시 4** | `alias c=clear` | c 입력 시 화면을 지우는 clear 명령어가 실행됩니다. |
| **특징** | 명령 우선순위 | **Alias는 내부 명령어, PATH 경로 명령어보다 우선순위가 높습니다(1순위).** |

## 4. 주요 환경 변수
셸 환경을 정의하는 중요한 변수들입니다.

| 변수명 | 설명 |
| :--- | :--- |
| **HOME** | 사용자의 홈 디렉터리 경로입니다. |
| **PATH** | 실행 파일을 찾을 디렉터리 경로들의 목록입니다. |
| **LANG** | 셸 사용 시 기본으로 지원되는 언어입니다. |
| **SHELL** | 사용자의 로그인 셸 경로를 저장합니다. |
| **PS1** | 프롬프트(Prompt) 변수로, 셸의 프롬프트 모양을 정의합니다. (예: `[\u@\h \W]\$`) |
| **HISTSIZE** | 히스토리 스택의 크기(저장되는 명령어 개수)를 지정합니다. |
| **TMOUT** | 일정 시간 동안 작업이 없을 경우 로그아웃시키는 시간(초 단위)입니다. |

## 5. 셸 메타 문자 및 리다이렉션
셸에서 특별한 의미를 가지는 문자들과 입출력 방향 전환 기호입니다.

| 기호 | 종류 | 설명 |
| :--- | :--- | :--- |
| `~` | Tilde | 홈 디렉터리를 나타냅니다. (~user: 해당 사용자의 홈) |
| `` ` `` | Backquotes | 문자열을 명령어로 인식하여 실행 결과로 대체합니다. (`$()`와 동일) |
| `" "` | Double Quotes | `$(변수)`, `` `(명령 대체) ``, `\(escape)`를 제외한 모든 문자를 일반 문자로 취급합니다. |
| `' '` | Single Quotes | 모든 특수 문자의 의미를 제거하고 문자열 그대로 취급합니다. |
| `>` | Redirection | 프로세스의 표준 출력을 파일로 내보냅니다(덮어쓰기). |
| `>>` | Redirection | 프로세스의 표준 출력을 파일 끝에 추가합니다(Append). |
| `<` | Redirection | 파일의 내용을 표준 입력으로 받습니다. |
| `\|` | Pipe | 앞 명령어의 출력을 뒤 명령어의 입력으로 전달합니다. |

## 6. 셸 프로그래밍 파라미터 및 위치 매개변수
스크립트 실행 시 전달되는 인자(Argument)와 상태를 다루는 변수입니다.

| 항목 | 기호/명령어 | 설명 |
| :--- | :--- | :--- |
| **위치 변수** | `$0` | 실행된 셸 스크립트 파일명 |
| **위치 변수** | `$1`, `$2`, ... | 스크립트에 넘겨진 첫 번째, 두 번째 아규먼트 |
| **특수 변수** | `$#` | 아규먼트의 총 개수 |
| **특수 변수** | `$*` | 전체 인자를 하나의 문자열로 처리 ("$1 $2 $3") |
| **특수 변수** | `$@` | 전체 인자를 각각의 문자열로 처리 ("$1" "$2" "$3") |
| **특수 변수** | `$?` | 바로 이전에 실행된 명령의 종료 상태 값 (0이면 성공) |
| **특수 변수** | `$$` | 현재 실행 중인 셸의 프로세스 ID(PID) |

## 7. 셸 프로그래밍 테스트 연산자 (조건문 핵심)
`if`문이나 `while`문 등의 조건식(`[ ]` 또는 `test`) 안에서 사용되는 연산자들입니다.

| 구분 | 연산자 | 설명 및 참(True)인 경우 |
| :--- | :--- | :--- |
| **파일 테스트** | `-d 파일` | 파일이 디렉터리이면 참 |
| | `-f 파일` | 파일이 일반 파일이면 참 |
| | `-e 파일` | 파일이 존재하면 참 |
| | `-s 파일` | 파일의 크기가 0보다 크면(내용이 있으면) 참 |
| | `-r 파일` | 파일이 읽기 가능하면 참 |
| | `-w 파일` | 파일이 쓰기 가능하면 참 |
| | `-x 파일` | 파일이 실행 가능하면 참 |
| | `-L 파일` | 파일이 심볼릭 링크이면 참 |
| | `-b 파일` | 파일이 블록 장치 파일이면 참 |
| | `-c 파일` | 파일이 문자 장치 파일이면 참 |
| **문자열 테스트** | `str1 = str2` | 두 문자열이 같으면 참 |
| | `str1 != str2` | 두 문자열이 다르면 참 |
| | `-z string` | 문자열의 길이가 0(null)이면 참 |
| | `-n string` | 문자열의 길이가 0이 아니면(내용이 있으면) 참 |
| **산술 테스트** | `-eq` | 두 값이 같으면 참 (Equal) |
| | `-ne` | 두 값이 다르면 참 (Not Equal) |
| | `-gt` | 왼쪽이 오른쪽보다 크면 참 (Greater Than) |
| | `-ge` | 왼쪽이 오른쪽보다 크거나 같으면 참 (Greater Equal) |
| | `-lt` | 왼쪽이 오른쪽보다 작으면 참 (Less Than) |
| | `-le` | 왼쪽이 오른쪽보다 작거나 같으면 참 (Less Equal) |
| **논리 연산자** | `-a` | AND 연산 (두 조건이 모두 참이면 참) |
| | `-o` | OR 연산 (둘 중 하나라도 참이면 참) |
| | `!` | NOT 연산 (조건이 거짓이면 참) |

## 8. 셸 변수 확장 및 파라미터 (심화)
변수의 값 유무에 따라 다른 값을 출력하거나, 패턴을 치환하는 기능입니다.

| 표현식 | 설명 |
| :--- | :--- |
| `${var:-word}` | 변수가 설정되지 않았거나 null이면 word를 반환 (변수 값은 변경 안 됨) |
| `${var:=word}` | 변수가 설정되지 않았거나 null이면 word를 변수에 대입하고 반환 |
| `${var:?msg}` | 변수가 없으면 msg를 에러로 출력하고 스크립트 종료 |
| `${var:+word}` | 변수가 설정되어 있으면 word를 반환, 없으면 null 반환 |
| `${#var}` | 변수 값의 문자열 길이를 반환 |
| `${var#pattern}` | 변수 앞부분부터 패턴과 일치하는 가장 짧은 부분 삭제 |
| `${var##pattern}` | 변수 앞부분부터 패턴과 일치하는 가장 긴 부분 삭제 |
| `${var%pattern}` | 변수 뒷부분부터 패턴과 일치하는 가장 짧은 부분 삭제 |
| `${var%%pattern}` | 변수 뒷부분부터 패턴과 일치하는 가장 긴 부분 삭제 |

## 9. 제어문 및 반복문 문법
스크립트의 흐름을 제어하는 핵심 구문입니다.

| 구문 | 형식 및 설명 |
| :--- | :--- |
| **if 문** | `if [ 조건 ]; then 명령; elif [ 조건 ]; then 명령; else 명령; fi` <br> 조건의 참/거짓에 따라 분기합니다. |
| **case 문** | `case $변수 in 패턴1) 명령;; 패턴2) 명령;; *) 기본명령;; esac` <br> 변수 값과 일치하는 패턴을 찾아 실행합니다. |
| **select 문** | `select 변수 in 목록 do 명령 done` <br> 메뉴 방식을 제공하여 사용자의 선택을 받습니다(주로 ksh, bash). |
| **for 문** | `for 변수 in 목록 do 명령 done` <br> 목록의 각 항목을 변수에 대입하며 반복합니다. |
| **while 문** | `while [ 조건 ] do 명령 done` <br> 조건이 참(True)인 동안 반복합니다. |
| **until 문** | `until [ 조건 ] do 명령 done` <br> 조건이 참이 될 때까지(거짓인 동안) 반복합니다. |
| **함수(Function)** | `function 이름() { 명령 }` 또는 `이름() { 명령 }` <br> 반복되는 코드를 묶어서 정의하고 호출합니다. |

## 10. 기타 중요 셸 명령어
스크립트 내부에서 흐름을 제어하거나 연산할 때 쓰입니다.

| 명령어 | 설명 |
| :--- | :--- |
| **break [n]** | 반복문(for, while 등)을 즉시 빠져나갑니다. (n단계 루프 탈출) |
| **continue [n]** | 반복문의 남은 부분을 건너뛰고 다음 반복을 시작합니다. |
| **exit [n]** | 스크립트를 종료합니다. n은 종료 상태값(0=성공)을 지정합니다. |
| **shift [n]** | 위치 매개변수($1, $2...)를 왼쪽으로 이동시킵니다. ($2가 $1이 됨) |
| **read** | 사용자 입력을 받아 변수에 저장합니다. (`read 변수명`) |
| **expr** | 산술 연산을 수행합니다. (예: `expr 3 + 2`, 곱하기는 `\*` 사용) |
| **eval** | 문자열을 명령어로 인식하여 실행하거나, 변수 안의 변수를 참조할 때 씁니다. |
| **printf** | C언어의 printf와 유사하게 형식을 지정하여 출력합니다. |

---

**이전 챕터**: [시스템 서비스 및 데몬](09-services-daemons.md)  
**다음 챕터**: [시스템 모니터링 및 로그](11-monitoring-logs.md)
