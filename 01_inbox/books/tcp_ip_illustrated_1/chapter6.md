---
title: TCP/IP Illustrated Vol.1 - Ch.6 DHCP and Autoconfiguration
tags: [network, book, tcp_ip_illustrated]
date modified: 2025-12-10
---

[[01_inbox/books/tcp_ip_illustrated_1/roadmap|π“– Return to Roadmap]]

### 1. Mermaid Mindmap

```mermaid
mindmap
  root((6μ¥: μ‹μ¤ν… κµ¬μ„±<br>DHCP & Autoconfiguration))
    κΈ°λ³Έ κ°λ…<br>Basics
      ν•„μ μ •λ³΄
        IP μ£Όμ† λ° λ§μ¤ν¬
        λΌμ°ν„° λ° DNS μ„λ²„
      κµ¬μ„± λ°©λ²•
        μλ™ κµ¬μ„± Manual
        μ„λ²„ κΈ°λ° DHCP
        μλ™ κµ¬μ„± Autoconfiguration
    DHCPv4
      λ™μ‘ μ›λ¦¬
        DORA Discover Offer Request Ack
        μ„λ€ Lease κ°λ…
      λ©”μ‹μ§€ ν¬λ§·
        BOOTP κΈ°λ°
        UDP ν¬νΈ 67 Server 68 Client
        μµμ… Options μ‚¬μ©
      λ¦΄λ μ΄ Relay
        Relay Agent Information Option RAIO
        μ„λΈλ„· κ°„ μ „λ‹¬
    DHCPv6
      νΉμ§•
        UDP ν¬νΈ 546 Client 547 Server
        DUID μ‹λ³„μ μ‚¬μ©
        IA Identity Association
      λ¨λ“
        Stateful μ£Όμ† ν• λ‹Ή
        Stateless μ •λ³΄λ§ μ κ³µ
        PD Prefix Delegation
    μλ™ κµ¬μ„±<br>SLAAC
      IPv4
        APIPA Link-Local 169.254.x.x
        ACD μ£Όμ† μ¶©λ κ°μ§€
      IPv6
        Link-Local μ£Όμ† μƒμ„±
        DAD μ¤‘λ³µ μ£Όμ† κ°μ§€
        RS RA λΌμ°ν„° λ°κ²¬ λ° μ ‘λ‘μ‚¬
        Privacy Extension μ„μ‹ μ£Όμ†
    PPPoE
      κ°λ…
        μ΄λ”λ„· μƒμ PPP
        DSL ν™κ²½μ—μ„ μ£Όλ΅ μ‚¬μ©
      λ‹¨κ³„
        Discovery PADI PADO PADR PADS
        Session PPP LCP IPCP
    λ³΄μ• λ° κΈ°νƒ€<br>Security & Others
      λ³΄μ• μ„ν‘
        Rogue Server
        μ£Όμ† κ³ κ° κ³µκ²©
      μ„μΉ μ •λ³΄
        LCI LoST
      DNS μƒνΈμ‘μ©
        FQDN μ—…λ°μ΄νΈ
```

---

### 2. μ¤‘μ” μ •λ³΄ λ° λ§¥λ½ μ”μ•½

**6μ¥: μ‹μ¤ν… κµ¬μ„±: DHCPμ™€ μλ™ κµ¬μ„± (System Configuration: DHCP and Autoconfiguration)**

μ΄ μ¥μ—μ„λ” νΈμ¤νΈκ°€ TCP/IP λ„¤νΈμ›ν¬μ—μ„ ν†µμ‹ ν•κΈ° μ„ν•΄ ν•„μ”ν• IP μ£Όμ†, μ„λΈλ„· λ§μ¤ν¬, κΈ°λ³Έ λΌμ°ν„°, DNS μ„λ²„ λ“±μ ν•„μ μ •λ³΄λ¥Ό μ–»λ” λ°©λ²•μΈ DHCP, SLAAC, κ·Έλ¦¬κ³  PPPoEμ— λ€ν•΄ λ‹¤λ£Ήλ‹λ‹¤.

#### 1. DHCP (Dynamic Host Configuration Protocol)

*   **κ°λ… λ° λ©μ :** DHCPλ” ν΄λΌμ΄μ–ΈνΈ/μ„λ²„ ν”„λ΅ν† μ½λ΅, νΈμ¤νΈμ— IP μ£Όμ†μ™€ κΈ°νƒ€ κµ¬μ„± μ •λ³΄λ¥Ό λ™μ μΌλ΅ ν• λ‹Ήν•©λ‹λ‹¤. μ΄λ” κ³Όκ±°μ BOOTP(Bootstrap Protocol)λ¥Ό ν™•μ¥ν• κ²ƒμΌλ΅, **μ„λ€(Lease)** κ°λ…μ„ λ„μ…ν•μ—¬ IP μ£Όμ†λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•©λ‹λ‹¤.
*   **λ™μ‘ λ°©μ‹ (IPv4):** ν΄λΌμ΄μ–ΈνΈλ” λΈλ΅λ“μΊμ¤νΈλ¥Ό ν†µν•΄ μ„λ²„λ¥Ό μ°Ύκ³  μ£Όμ†λ¥Ό μ”μ²­ν•©λ‹λ‹¤. μ „ν•μ μΈ 4λ‹¨κ³„ κµν™ κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤,.
    1.  **DHCPDISCOVER:** ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ¥Ό μ°ΎκΈ° μ„ν•΄ λΈλ΅λ“μΊμ¤νΈ.
    2.  **DHCPOFFER:** μ„λ²„κ°€ IP μ£Όμ†μ™€ μ„λ€ μ‹κ°„μ„ μ μ•.
    3.  **DHCPREQUEST:** ν΄λΌμ΄μ–ΈνΈκ°€ νΉμ • μ„λ²„μ μ μ•μ„ μ„ νƒν•κ³  μ£Όμ† μ‚¬μ©μ„ μ”μ²­ (λλ” μ„λ€ κ°±μ‹ ).
    4.  **DHCPACK:** μ„λ²„κ°€ μ”μ²­μ„ μΉμΈν•κ³  κµ¬μ„±μ„ ν™•μ •.
*   **λ©”μ‹μ§€ ν¬λ§·:** DHCP λ©”μ‹μ§€λ” BOOTP λ©”μ‹μ§€ ν•μ‹μ„ κΈ°λ°μΌλ΅ ν•λ©°, UDP ν¬νΈ 67(μ„λ²„)κ³Ό 68(ν΄λΌμ΄μ–ΈνΈ)μ„ μ‚¬μ©ν•©λ‹λ‹¤. μ¶”κ°€μ μΈ κΈ°λ¥μ€ κ°€λ³€ κΈΈμ΄μ **μµμ…(Options)** ν•„λ“λ¥Ό ν†µν•΄ κµ¬ν„λ©λ‹λ‹¤,.
*   **λ¦΄λ μ΄ μ—μ΄μ „νΈ (Relay Agent):** ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ„λ΅ λ‹¤λ¥Έ μ„λΈλ„·μ— μμ„ λ•, λΌμ°ν„°κ°€ DHCP λ©”μ‹μ§€λ¥Ό μ¤‘κ³„ν•΄ μ¤λ‹λ‹¤. μ΄λ• **Relay Agent Information Option (RAIO)**μ„ μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ νμ„  ID λ“±μ μ¶”κ°€ μ •λ³΄λ¥Ό μ„λ²„μ— μ „λ‹¬ν•  μ μμµλ‹λ‹¤,.

#### 2. DHCPv6

*   **IPv4μ™€μ μ°¨μ΄:** DHCPv6λ” IPv6λ¥Ό μ„ν•΄ μ¬μ„¤κ³„λμ—μΌλ©° UDP ν¬νΈ 546(ν΄λΌμ΄μ–ΈνΈ)κ³Ό 547(μ„λ²„)μ„ μ‚¬μ©ν•©λ‹λ‹¤. MAC μ£Όμ† λ€μ‹  **DUID (DHCP Unique Identifier)**λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ¥Ό μ‹λ³„ν•λ©°, μ£Όμ† λ¬¶μμ„ κ΄€λ¦¬ν•κΈ° μ„ν•΄ **IA (Identity Association)** κ°λ…μ„ μ‚¬μ©ν•©λ‹λ‹¤,.
*   **λ¨λ“:**
    *   **Stateful:** μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² IPv6 μ£Όμ†μ™€ κΈ°νƒ€ μ •λ³΄λ¥Ό λ¨λ‘ ν• λ‹Ήν•κ³  μƒνƒλ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤.
    *   **Stateless:** ν΄λΌμ΄μ–ΈνΈλ” SLAACλ¥Ό ν†µν•΄ μ£Όμ†λ¥Ό μƒμ„±ν•κ³ , DHCPv6 μ„λ²„λ” DNS μ„λ²„ μ£Όμ†μ™€ κ°™μ€ λ¶€κ°€ μ •λ³΄λ§ μ κ³µν•©λ‹λ‹¤,.
*   **Prefix Delegation (PD):** ISPκ°€ κ³ κ° λΌμ°ν„°μ—κ² ν•μ„ λ„¤νΈμ›ν¬μ—μ„ μ‚¬μ©ν•  IPv6 ν”„λ¦¬ν”½μ¤(μ£Όμ† λ€μ—­)λ¥Ό ν• λ‹Ήν•΄ μ£Όλ” κΈ°λ¥μ…λ‹λ‹¤.

#### 3. λ¬΄μƒνƒ μ£Όμ† μλ™ κµ¬μ„± (SLAAC)

*   **IPv4 Link-Local (APIPA):** DHCP μ„λ²„κ°€ μ—†λ” κ²½μ°, νΈμ¤νΈλ” 169.254.0.0/16 λ€μ—­μ—μ„ μ„μμ μ£Όμ†λ¥Ό μ„ νƒν•μ—¬ λ§ν¬ λ΅μ»¬ μ£Όμ†λ΅ μ‚¬μ©ν•©λ‹λ‹¤. μ£Όμ† μ¶©λμ„ λ°©μ§€ν•κΈ° μ„ν•΄ ARPλ¥Ό μ΄μ©ν• **ACD (Address Conflict Detection)**λ¥Ό μν–‰ν•©λ‹λ‹¤,.
*   **IPv6 SLAAC:** IPv6 νΈμ¤νΈλ” λΌμ°ν„° μ—†μ΄λ„ λ§ν¬ λ΅μ»¬ μ£Όμ†λ¥Ό μ¤μ¤λ΅ μƒμ„±ν•  μ μμµλ‹λ‹¤.
    *   **λ§ν¬ λ΅μ»¬ μ£Όμ† μƒμ„±:** `fe80::` μ ‘λ‘μ‚¬μ™€ μΈν„°νμ΄μ¤ μ‹λ³„μ(MAC μ£Όμ† κΈ°λ° λλ” λ¬΄μ‘μ„)λ¥Ό μ΅°ν•©ν•©λ‹λ‹¤.
    *   **DAD (Duplicate Address Detection):** μƒμ„±λ μ£Όμ†κ°€ μ¤‘λ³µλλ”μ§€ ν™•μΈν•κΈ° μ„ν•΄ ICMPv6 Neighbor Solicitation λ©”μ‹μ§€λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
    *   **κΈ€λ΅λ² μ£Όμ† μƒμ„±:** λΌμ°ν„°κ°€ λ³΄λ‚΄λ” **Router Advertisement (RA)** λ©”μ‹μ§€μ ν”„λ¦¬ν”½μ¤ μ •λ³΄λ¥Ό μ‚¬μ©ν•μ—¬ κΈ€λ΅λ² μ£Όμ†λ¥Ό μƒμ„±ν•©λ‹λ‹¤. λ³΄μ•μ„ μ„ν•΄ μ‹κ°„μ΄ μ§€λ‚λ©΄ λ°”λ€λ” μ„μ‹ μ£Όμ†(Temporary Address)λ¥Ό μ‚¬μ©ν•  μλ„ μμµλ‹λ‹¤,.

#### 4. PPP over Ethernet (PPPoE)

*   **μ©λ„:** DSLκ³Ό κ°™μ€ κ΄‘λ€μ—­ μ ‘μ† ν™κ²½μ—μ„ μ‚¬μ©μ μΈμ¦κ³Ό IP ν• λ‹Ήμ„ μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤. μ΄λ”λ„· ν”„λ μ„ μ•μ— PPP ν”„λ μ„μ„ μΊ΅μν™”ν•μ—¬ μ „μ†΅ν•©λ‹λ‹¤.
*   **λ‹¨κ³„:**
    *   **Discovery λ‹¨κ³„:** ν΄λΌμ΄μ–ΈνΈμ™€ μ•΅μ„Έμ¤ μ½μ„ΌνΈλ μ΄ν„°(AC)κ°€ MAC μ£Όμ†μ™€ μ„Έμ… IDλ¥Ό κµν™ν•©λ‹λ‹¤. PADI(κ°μ‹), PADO(μ μ•), PADR(μ”μ²­), PADS(μ„Έμ… ν™•μΈ) λ©”μ‹μ§€κ°€ μ‚¬μ©λ©λ‹λ‹¤.
    *   **Session λ‹¨κ³„:** PPP μ„Έμ…μ΄ μλ¦½λμ–΄ λ°μ΄ν„°κ°€ μ „μ†΅λλ©°, LCPμ™€ IPCPλ¥Ό ν†µν•΄ IP μ£Όμ†κ°€ ν• λ‹Ήλ©λ‹λ‹¤,.

#### 5. κΈ°νƒ€ κΈ°λ¥ λ° λ³΄μ•

*   **DNS μƒνΈμ‘μ©:** DHCP μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² ν• λ‹Ήν• IP μ£Όμ†μ™€ νΈμ¤νΈ μ΄λ¦„μ„ DNS μ„λ²„μ— λ™μ μΌλ΅ μ—…λ°μ΄νΈν•μ—¬ μ΄λ¦„ ν’€μ΄κ°€ κ°€λ¥ν•λ„λ΅ μ§€μ›ν•  μ μμµλ‹λ‹¤.
*   **μ„μΉ μ •λ³΄:** DHCP μµμ…μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ λ¬Όλ¦¬μ  μ„μΉ(LCI)λ‚ κΈ΄κΈ‰ μ„λΉ„μ¤ μ„μΉ(LoST) μ •λ³΄λ¥Ό μ κ³µν•  μ μμµλ‹λ‹¤.
*   **λ³΄μ•:** κΈ°λ³Έμ μΌλ΅ DHCPμ™€ NDλ” μΈμ¦ κΈ°λ¥μ΄ μ—†μ–΄ μ¤ν‘Έν•‘ κ³µκ²©μ΄λ‚ Rogue μ„λ²„ κ³µκ²©μ— μ·¨μ•½ν•©λ‹λ‹¤. μ΄λ¥Ό λ³΄μ™„ν•κΈ° μ„ν•΄ DHCP μΈμ¦ μµμ…μ΄λ‚ IPv6μ SEND(Secure Neighbor Discovery) ν”„λ΅ν† μ½, μ¤μ„μΉμ DHCP Snooping κΈ°λ¥ λ“±μ΄ μ μ•λμ—μµλ‹λ‹¤,.