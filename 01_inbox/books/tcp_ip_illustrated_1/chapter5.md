---
title: chapter5
tags: [book, network, tcp_ip_illustrated]
aliases: []
date modified: 2025-12-11 13:55:31 +09:00
date created: 2025-12-11 10:58:04 +09:00
---

[[01_inbox/books/tcp_ip_illustrated_1/roadmap|π“– Return to Roadmap]]

## See Also

- [[01_inbox/books/routing_tcp_ip_1/chapter1|Routing TCP/IP Vol.1 - Ch.1 TCP/IP Review]]

```mermaid
mindmap
  root((5μ¥: μΈν„°λ„· ν”„λ΅ν† μ½<br>The Internet Protocol))
    κΈ°λ³Έ μ›μΉ™<br>Fundamentals
      μµμ„ ν• μ„λΉ„μ¤ Best-effort
      λΉ„μ—°κ²°μ„± Connectionless
      λ°μ΄ν„°κ·Έλ¨ Datagram
    ν—¤λ” κµ¬μ΅°<br>Headers
      IPv4
        20λ°”μ΄νΈ + μµμ…
        IHL ν—¤λ” κΈΈμ΄
        μ‹λ³„μ λ° λ‹¨νΈν™” Flags Offset
        ν—¤λ” μ²΄ν¬μ„¬ Checksum
      IPv6
        κ³ μ • 40λ°”μ΄νΈ
        μ²΄ν¬μ„¬ μ—†μ No Checksum
        Flow Label
      κ³µν†µ ν•„λ“
        DS Field DiffServ
        ECN λ…μ‹μ  νΌμ΅ μ•λ¦Ό
    IPv6 ν™•μ¥ ν—¤λ”<br>Extension Headers
      Next Header μ²΄μ΄λ‹
      μ£Όμ” ν—¤λ”
        Hop-by-Hop Options
        Routing Header RH0 deprecated RH2
        Fragment Header λ°μ‹ μ§€ λ‹¨νΈν™”
        Destination Options
      μµμ…
        Jumbo Payload
        Router Alert
    IP ν¬μ›λ”©<br>Forwarding
      μ „λ‹¬ λ°©μ‹
        μ§μ ‘ μ „λ‹¬ Direct
        κ°„μ ‘ μ „λ‹¬ Indirect via Router
      ν…μ΄λΈ” κµ¬μ΅°
        Destination Mask Next-hop Interface
      μ•κ³ λ¦¬μ¦
        μµμ¥ ν”„λ¦¬ν”½μ¤ μΌμΉ<br>Longest Prefix Match
    λ¨λ°”μΌ IP<br>Mobile IP
      κµ¬μ„± μ”μ†
        Mobile Node MN
        Home Agent HA
        Care-of Address CoA
      λ™μ‘ λ¨λ“
        μ–‘λ°©ν–¥ ν„°λ„λ§ Bidirectional Tunneling
        κ²½λ΅ μµμ ν™” Route Optimization RRP
    νΈμ¤νΈ μ²λ¦¬<br>Host Processing
      νΈμ¤νΈ λ¨λΈ
        Strong Model μΈν„°νμ΄μ¤ μ—„κ²© μΌμΉ
        Weak Model μ μ—°ν• μμ‹  μ†΅μ‹ 
      μ£Όμ† μ„ νƒ RFC 3484
        μ†μ¤ μ£Όμ† μ„ νƒ SAS
        λ©μ μ§€ μ£Όμ† μ„ νƒ DAS
```

---

## μ¤‘μ” μ •λ³΄ λ° λ§¥λ½ μ”μ•½

**5 μ¥: μΈν„°λ„· ν”„λ΅ν† μ½ (The Internet Protocol)**

μ΄ μ¥μ—μ„λ” TCP/IP ν”„λ΅ν† μ½ μ¤μ„νΈμ ν•µμ‹¬μΈ IP(Internet Protocol) μ κµ¬μ΅°, λ™μ‘ μ›λ¦¬, IPv4 μ™€ IPv6 μ μ°¨μ΄μ , κ·Έλ¦¬κ³  λ¨λ°”μΌ IP μ™€ κ°™μ€ ν™•μ¥ κΈ°λ¥μ„ λ‹¤λ£Ήλ‹λ‹¤.

### 1. IP μ κΈ°λ³Έ νΉμ„± λ° ν—¤λ” (IPv4 vs. IPv6)
- **μ„λΉ„μ¤ λ¨λΈ:** IP λ” **μµμ„ ν• (best-effort)**, **λΉ„μ—°κ²°μ„± (connectionless)** λ°μ΄ν„°κ·Έλ¨ μ„λΉ„μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤. λ°μ΄ν„°μ μ‹ λΆ°μ„± (μ¬μ „μ†΅, μμ„ λ³΄μ¥ λ“±) μ€ μƒμ„ κ³„μΈµ (TCP λ“±) μ΄ λ‹΄λ‹Ήν•©λ‹λ‹¤.
- **IPv4 ν—¤λ”:** κ°€λ³€ κΈΈμ΄ (μΌλ°μ μΌλ΅ 20 λ°”μ΄νΈ) μ΄λ©°, ν—¤λ” κΈΈμ΄λ¥Ό λ‚νƒ€λ‚΄λ” **IHL**, μ „μ²΄ κΈΈμ΄λ¥Ό λ‚νƒ€λ‚΄λ” **Total Length**, λ‹¨νΈν™”λ¥Ό μ„ν• **Identification/Flags/Offset**, λ£¨ν•‘ λ°©μ§€λ¥Ό μ„ν• **TTL**, μƒμ„ ν”„λ΅ν† μ½μ„ μ§€μ‹ν•λ” **Protocol**, κ·Έλ¦¬κ³  ν—¤λ” μ¤λ¥ κ²€μ¶μ„ μ„ν• **Header Checksum** ν•„λ“λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.
- **IPv6 ν—¤λ”:** κ³ μ • 40 λ°”μ΄νΈ ν¬κΈ°λ΅ λ‹¨μν™”λμ—μµλ‹λ‹¤. **IHL, Header Checksum ν•„λ“κ°€ μ κ±°**λμ—μΌλ©° (μƒμ„ κ³„μΈµ μ²΄ν¬μ„¬μ— μμ΅΄), λ‹¨νΈν™” μ •λ³΄λ” ν™•μ¥ ν—¤λ”λ΅ μ΄λ™ν–μµλ‹λ‹¤. **Flow Label**μ΄ μ¶”κ°€λμ—κ³ , Protocol ν•„λ“λ” **Next Header**λ΅ λ€μ²΄λμ–΄ ν™•μ¥ ν—¤λ” μ²΄μ΄λ‹μ„ μ§€μ›ν•©λ‹λ‹¤,.
- **DS Field & ECN:** IPv4 μ ToS(Type of Service) μ™€ IPv6 μ Traffic Class λ” **DS Field(Differentiated Services)**μ™€ **ECN(Explicit Congestion Notification)**μΌλ΅ μ¬μ •μλμ–΄, QoS(μ„λΉ„μ¤ ν’μ§) λ° νΌμ΅ μ μ–΄μ— μ‚¬μ©λ©λ‹λ‹¤,.

### 2. IPv6 ν™•μ¥ ν—¤λ” (Extension Headers)
- **κµ¬μ΅°:** IPv6 λ” κΈ°λ³Έ ν—¤λ” λ’¤μ— **Next Header** ν•„λ“λ¥Ό ν†µν•΄ μ—°κ²°λ μΌλ ¨μ ν™•μ¥ ν—¤λ”λ“¤μ„ κ°€μ§ μ μμµλ‹λ‹¤. μ΄λ” μ μ—°μ„±κ³Ό ν¨μ¨μ„±μ„ μ κ³µν•©λ‹λ‹¤.
- **μ£Όμ” ν™•μ¥ ν—¤λ”:**
    - **Hop-by-Hop Options:** κ²½λ΅μƒμ λ¨λ“  λΌμ°ν„°κ°€ μ²λ¦¬ν•΄μ•Ό ν•λ” μµμ… (μ: Router Alert, Jumbogram).
    - **Routing Header:** λ°μ‹ μκ°€ ν¨ν‚·μ κ²½λ΅λ¥Ό μ§€μ •. **RH0(Source Routing)**λ” λ³΄μ• λ¬Έμ λ΅ μ‚¬μ© μ¤‘λ‹¨ (deprecated) λμ—μΌλ©°, MIPv6 λ¥Ό μ„ν• **RH2**κ°€ μ‚¬μ©λ©λ‹λ‹¤.
    - **Fragment Header:** IPv6 μ—μ„λ” λ°μ‹ μ (Source) λ§μ΄ λ‹¨νΈν™”λ¥Ό μν–‰ν•  μ μμΌλ©°, μ¤‘κ°„ λΌμ°ν„°λ” λ‹¨νΈν™”λ¥Ό ν•μ§€ μ•μµλ‹λ‹¤. MTU λ³΄λ‹¤ ν° ν¨ν‚·μ„ λ³΄λ‚Ό λ• μ΄ ν—¤λ”λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- **Jumbo Payload:** 64KB μ΄μƒμ νμ΄λ΅λ“λ¥Ό μ§€μ›ν•κΈ° μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

### 3. IP ν¬μ›λ”© (IP Forwarding)
- **μ „λ‹¬ λ°©μ‹:** λ©μ μ§€κ°€ λ™μΌν• λ§ν¬μ— μμΌλ©΄ **μ§μ ‘ μ „λ‹¬ (Direct Delivery)**ν•κ³ , κ·Έλ ‡μ§€ μ•μΌλ©΄ λΌμ°ν„°λ¥Ό ν†µν•΄ **κ°„μ ‘ μ „λ‹¬ (Indirect Delivery)**ν•©λ‹λ‹¤.
- **ν¬μ›λ”© ν…μ΄λΈ”:** λ©μ μ§€, λ§μ¤ν¬, λ„¥μ¤νΈ ν™‰ (Next-hop), μΈν„°νμ΄μ¤ μ •λ³΄λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤. IP λ” **ν™‰ - λ°”μ΄ - ν™‰ (hop-by-hop)** λ°©μ‹μ„ λ”°λ¥΄λ©°, μ „μ²΄ κ²½λ΅λ¥Ό μ•μ§€ λ»ν•©λ‹λ‹¤.
- **μµμ¥ ν”„λ¦¬ν”½μ¤ μΌμΉ (Longest Prefix Match):** ν¬μ›λ”© ν…μ΄λΈ” κ²€μƒ‰ μ‹, λ©μ μ§€ μ£Όμ†μ™€ κ°€μ¥ λ§μ€ λΉ„νΈκ°€ μΌμΉν•λ” (λ§μ¤ν¬κ°€ κ°€μ¥ κΈ΄) μ—”νΈλ¦¬λ¥Ό μ„ νƒν•μ—¬ ν¨ν‚·μ„ μ „λ‹¬ν•©λ‹λ‹¤.

### 4. λ¨λ°”μΌ IP (Mobile IP)
- **κ°λ…:** νΈμ¤νΈ (Mobile Node, MN) κ°€ λ„¤νΈμ›ν¬ μ ‘μ† μ„μΉλ¥Ό λ³€κ²½ν•΄λ„ (IP μ£Όμ†κ°€ λ³€κ²½λμ–΄λ„) κΈ°μ΅΄ μ—°κ²°μ„ μ μ§€ν•κ² ν•΄μ£Όλ” κΈ°μ μ…λ‹λ‹¤. **ν™ μ£Όμ† (HoA)**μ™€ ν„μ¬ μ„μΉμ **CoA(Care-of Address)**λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- **λ™μ‘ λ¨λ“:**
    - **μ–‘λ°©ν–¥ ν„°λ„λ§ (Bidirectional Tunneling):** λ¨λ“  νΈλν”½μ΄ **ν™ μ—μ΄μ „νΈ (Home Agent, HA)**λ¥Ό κ±°μ³ ν„°λ„λ§λμ–΄ μ „λ‹¬λ©λ‹λ‹¤. μ„¤μ •μ΄ κ°„λ‹¨ν•μ§€λ§ κ²½λ΅ λΉ„ν¨μ¨μ„±μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.
    - **κ²½λ΅ μµμ ν™” (Route Optimization):** MN κ³Ό ν†µμ‹  μƒλ€ (Correspondent Node, CN) κ°€ μ§μ ‘ ν†µμ‹ ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ **RRP(Return Routability Procedure)**λ¥Ό ν†µν•΄ λ³΄μ• κ²€μ¦ (HoTI/CoTI λ©”μ‹μ§€ κµν™) μ„ μν–‰ν• ν›„ λ°”μΈλ”©μ„ λ§Ίμµλ‹λ‹¤,.

### 5. νΈμ¤νΈ μ²λ¦¬ λ° μ£Όμ† μ„ νƒ (Host Processing)
- **νΈμ¤νΈ λ¨λΈ:**
    - **Strong Host Model:** ν¨ν‚·μ΄ λ„μ°©ν• μΈν„°νμ΄μ¤μ— ν• λ‹Ήλ μ£Όμ†μ™€ λ©μ μ§€ μ£Όμ†κ°€ μΌμΉν•΄μ•Όλ§ ν¨ν‚·μ„ μλ½ν•©λ‹λ‹¤ (λ³΄μ• κ°•ν™”).
    - **Weak Host Model:** λ΅μ»¬ μ‹μ¤ν…μ μ–΄λ–¤ IP μ£Όμ†λΌλ„ λ©μ μ§€μ™€ μΌμΉν•λ©΄ μ–΄λ μΈν„°νμ΄μ¤λ΅ λ“¤μ–΄μ¤λ“  μλ½ν•©λ‹λ‹¤.
- **μ£Όμ† μ„ νƒ μ•κ³ λ¦¬μ¦ (RFC 3484):** λ©€ν‹°ν™ νΈμ¤νΈλ‚ IPv4/IPv6 λ“€μ–Ό μ¤νƒ ν™κ²½μ—μ„ μ†μ¤ λ° λ©μ μ§€ μ£Όμ†λ¥Ό μ„ νƒν•λ” κ·μΉ™μ…λ‹λ‹¤. μΌλ°μ μΌλ΅ **λ™μΌν• μ¤μ½”ν”„ (Scope)**, **λ” μ‘μ€ μ¤μ½”ν”„**, **μ‚¬μ©λμ§€ μ•λ” (deprecated) μ£Όμ† νν”Ό** λ“±μ μ°μ„ μμ„λ¥Ό λ”°λ¦…λ‹λ‹¤.

### 6. λ³΄μ• μ΄μ (Attacks Involving IP)
- **μ¤ν‘Έν•‘ (Spoofing):** μ†μ¤ IP μ£Όμ†λ¥Ό μ„μ΅°ν•μ—¬ κ³µκ²©ν•κ±°λ‚ μ‹ μ›μ„ μ¨κΈ°λ” ν–‰μ„μ…λ‹λ‹¤. **Ingress Filtering**μ„ ν†µν•΄ μ™„ν™”ν•  μ μμµλ‹λ‹¤.
- **λ‹¨νΈν™” κ³µκ²©:** λ‹¨νΈν™”λ ν¨ν‚· μ²λ¦¬μ— λ²„κ·Έκ°€ μκ±°λ‚, λ°©ν™”λ²½μ„ μ°νν•κΈ° μ„ν•΄ μ΅°μ‘λ μ΅°κ°μ„ λ³΄λ‚΄λ” κ³µκ²© λ“±μ΄ μμµλ‹λ‹¤.
