---
title: 17. 셸 옵션 및 shopt 심층 정리
tags: [linux, shell, bash, options, set, shopt]
---

# 17. 셸 옵션 및 shopt 심층 정리

스크립트의 동작 방식을 제어하는 `set`과 `shopt` 옵션들의 기능을 표로 정리합니다.

## 1. set 주요 옵션 (Standard & Bash)
| 옵션 | 숏컷 | 설명 | 보완 및 주의사항 |
| :--- | :---: | :--- | :--- |
| **errexit** | `-e` | 명령 실패 시 즉시 종료 | `if`, `while`, `||` 등 예외 구간 인지 필요 |
| **nounset** | `-u` | 미정의 변수 참조 시 에러 | `${var:-}` 패턴으로 기본값 가드 권장 |
| **pipefail** | | 파이프라인 중 하나라도 실패하면 전체 실패 | 연쇄 명령의 안정성 확보에 필수 |
| **xtrace** | `-x` | 실행되는 모든 명령 추적 출력 | `PS4` 설정을 통해 출력 가독성 향상 가능 |
| **errtrace** | `-E` | 함수 및 서브셸로 ERR trap 전파 | 디버깅 및 전체 에러 핸들링 시 유용 |
| **noclobber** | `-C` | `>` 로 기존 파일 덮어쓰기 방지 | 강제 덮어쓰기 시 `>|` 사용 |

## 2. shopt 옵션 (Bash 전용)
| 옵션 | 설명 | 특징 |
| :--- | :--- | :--- |
| **nullglob** | 글로브 미매칭 시 빈 문자열로 처리 | `for` 루프에서 파일 없을 때 유용 |
| **failglob** | 글로브 미매칭 시 에러 발생 | 오타로 인한 잘못된 경로 처리 방지 |
| **dotglob** | 와일드카드(`*`)가 숨김 파일(`.`)도 포함 | 전체 파일 대상 작업 시 사용 |
| **globstar** | `**`를 사용하여 재귀적 디렉터리 탐색 | `find` 없이 하위 모든 파일 검색 가능 |
| **extglob** | 확장 패턴(`@(a|b)`, `!(a)` 등) 활성화 | 복잡한 파일 패턴 매칭 시 필수 |
| **lastpipe** | 파이프 마지막 명령을 현재 셸에서 실행 | 비인터랙티브에서 부모 변수 반영 시 사용 |

## 3. POSIX 모드 차이점
| 기능 | 일반 Bash 모드 | POSIX 모드 (`set -o posix`) |
| :--- | :--- | :--- |
| **`echo`** | `-n`, `-e` 등 확장 옵션 지원 | 옵션을 문자열로 출력할 수 있음 |
| **확장 문법** | 배열, `[[ ]]`, `<<<` 등 지원 | 호환성을 위해 사용이 제한되거나 비활성 |
| **함수 정의** | `function name { ... }` 지원 | `name() { ... }` 방식만 표준 권장 |

---
## 🔗 연결 문서
- [[10-debugging-style]] - 디버깅 및 스타일 가이드
- [[18-case-studies]] - 케이스 스터디 및 템플릿
