---
title: 10-debugging-style
tags: [bash, debugging, linux, shell, style-guide, testing]
aliases: []
date modified: 2025-12-28 21:19:17 +09:00
date created: 2025-12-28 20:45:28 +09:00
---

## 10. 디버깅, 테스트, 스타일 가이드

스크립트의 에러를 추적하고, 품질을 검증하며, 협업을 위한 일관된 스타일을 유지하는 방법을 정리합니다.

### 1. 주요 디버깅 옵션 (set)

| 옵션 | 의미 | 용도 |
| :---: | :--- | :--- |
| `-x` | **xtrace** | 실행되는 모든 명령과 인자를 출력 (추적) |
| `-e` | **errexit** | 명령이 실패하면 즉시 스크립트 종료 |
| `-u` | **nounset** | 선언되지 않은 변수를 참조할 경우 에러 발생 |
| `-o pipefail` | **pipefail** | 파이프라인 중간 단계의 실패를 감지 |
| `-E` / `-T` | **trap 전파** | 함수나 서브셸에서도 ERR 트랩/트레이스 전파 |

### 2. PS4 활용 (디버그 로그 커스터마이징)

`set -x` 출력 시 행 번호나 파일 이름을 표시하여 가독성을 높입니다.

| 구성 요소     |                                   코드                                    | 설명                 |
| :-------- | :---------------------------------------------------------------------: | :----------------- |
| **행 번호**  |                               `${LINENO}`                               | 현재 실행 중인 코드의 라인 번호 |
| **파일명**   |                            `${BASH_SOURCE}`                             | 현재 실행 중인 스크립트의 경로  |
| **함수명**   |                            `${FUNCNAME[0]}`                             | 현재 실행 중인 함수 이름     |
| **설정 예시** | `PS4='+(${BASH_SOURCE}:${LINENO}): ${FUNCNAME[0]:+${FUNCNAME[0]}(): }'` |                    |

### 3. ShellCheck 주요 경고 및 해결책

| ID | 문제 (Issue) | 해결 (Solution) |
| :---: | :--- | :--- |
| **SC2086** | 변수 인용 누락 (Word splitting) | `"$VAR"` 처럼 더블 쿼트 사용 |
| **SC2046** | 명령 치환 결과 미인용 | `$(cmd)` 대신 `cmd` 결과를 배열에 담거나 인용 |
| **SC2164** | `cd` 실패 체크 누락 | `cd -- "$dir" \|\| exit` 형태로 사용 |
| **SC2002** | 불필요한 `cat` 사용 (Useless use of cat) | `cmd < file` 리디렉션 사용 |

### 4. 스타일 가이드 (Style Guide)

| 항목               | 권장 사항                        | 특징                 |
| :--------------- | :--------------------------- | :----------------- |
| **네이밍 (상수)**     | `UPPER_CASE`                 | 전역 상수, 설정값         |
| **네이밍 (함수/변수)**  | `lower_case_with_underscore` | 일반 변수 및 함수 명칭      |
| **들여쓰기**         | 2 칸 또는 4 칸 (Space)             | 일관성 유지 필수          |
| **인용 (Quoting)** | **항상 더블 쿼트 사용**              | 글로브가 필요한 경우 외에는 필수 |
| **에러 출력**        | `>&2` (STDERR)               | 로깅 및 에러 메시지 분리     |

---

### 🔗 연결 문서

- [[09-environment-startup]] - 환경 설정 및 시작 스크립트
- [[11-security-performance]] - 보안 및 성능 최적화
