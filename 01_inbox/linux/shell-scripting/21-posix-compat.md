---
title: 21. POSIX sh νΈν™ κ°€μ΄λ“
tags: [linux, shell, posix, sh, portability]
---

# 21. POSIX sh νΈν™ κ°€μ΄λ“

Bash μ „μ© κΈ°λ¥μ„ λ°°μ ν•κ³  `/bin/sh` λλ” BusyBox λ“± μ ν•λ ν™κ²½μ—μ„λ„ λ™μ‘ν•λ” μ¤ν¬λ¦½νΈ μ‘μ„±λ²•μ„ μ •λ¦¬ν•©λ‹λ‹¤.

## 1. ν•µμ‹¬ μ°¨μ΄ λ° λ€μ• (Bash vs POSIX)
| κΈ°λ¥ | Bash ν™•μ¥ λ¬Έλ²• | POSIX νΈν™ λ€μ• |
| :--- | :--- | :--- |
| **μ΅°κ±΄λ¬Έ** | `[[ condition ]]` | `[ condition ]` (μΈμ© μ—„κ²© ν•„μ) |
| **μ‚°μ  μ—°μ‚°** | `(( i++ ))` | `i=$((i + 1))` |
| **λ°°μ—΄** | `arr=(v1 v2)` | `set -- v1 v2` (μ„μΉ λ§¤κ°λ³€μ ν™μ©) |
| **ν•¨μ μ„ μ–Έ** | `function name { ... }` | `name() { ... }` |
| **λ΅μ»¬ λ³€μ** | `local var="val"` | μ „μ—­ λ³€μ μ΄κΈ°ν™” λλ” μ„λΈμ…Έ `( )` ν™μ© |
| **νμ–΄ μ¤νΈλ§** | `<<< "$VAR"` | `echo "$VAR" | cmd` λλ” `Here-doc` |

## 2. μ΄μ‹μ„± λ‚®μ€ λ„κµ¬μ λ€μ•
| λ„κµ¬ / κΈ°λ¥ | λ¬Έμ μ  | ν•΄κ²° λ°©μ• (Portable Way) |
| :--- | :--- | :--- |
| **`readlink -f`** | macOS λ“±μ— μ—†μ | `perl`, `python` μ›λΌμ΄λ„ λλ” λ‹¨κ³„μ  `cd` |
| **`sed -i`** | GNU/BSD μΈμ μ°¨μ΄ | `sed ... > temp && mv temp file` (μ •μ„ λ°©μ‹) |
| **`timeout`** | ν‘μ¤€ λ„κµ¬ μ•„λ‹ | `perl -e 'alarm 5; exec @ARGV' cmd` |
| **`date -d`** | μµμ… ν‘μ¤€ μ•„λ‹ | `date` ν¬λ§·ν… μ¤‘μ‹¬ μ‚¬μ© λλ” `perl` ν™μ© |

## 3. POSIX ν‘μ¤€ μ²΄ν¬λ¦¬μ¤νΈ
- **Quoting**: λ¨λ“  λ³€μ μ°Έμ΅°μ—λ” λ°λ“μ‹ λ”λΈ” μΏΌνΈ(`"`)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- **Shebang**: `#!/bin/sh`λ¥Ό μ‚¬μ©ν•μ—¬ Bash μ „μ© κΈ°λ¥ λ΅λ”©μ„ λ°©μ§€ν•©λ‹λ‹¤.
- **Built-ins**: `echo` λ€μ‹  `printf`λ¥Ό μ‚¬μ©ν•μ—¬ μ¶λ ¥μ μ΄μ‹μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤.
- **Tests**: `==` λ€μ‹  `=` λ¥Ό μ‚¬μ©ν•μ—¬ λ¬Έμμ—΄μ„ λΉ„κµν•©λ‹λ‹¤.

## 4. POSIX νΈν™ λ£¨ν”„ μμ‹
```sh
# μ•μ „ν• νμΌ μ½κΈ°
while IFS= read -r line; do
  printf '%s\n' "$line"
done < input.txt
```

---
## π”— μ—°κ²° λ¬Έμ„
- [[20-command-drills]] - μ»¤λ§¨λ“ λ“λ¦΄ μ„ΈνΈ
- [[../shell-scripting]] - μ „μ²΄ κ°€μ΄λ“ λ©λ΅
