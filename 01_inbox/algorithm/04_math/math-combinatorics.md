---
title: math-combinatorics
tags: [algorithm, combination, combinatorics, factorial, math, permutation]
aliases: [nCr, 순열, 이항 계수, 조합, 조합론, 팩토리얼]
date modified: 2025-12-18 15:47:27 +09:00
date created: 2025-12-18 11:52:16 +09:00
---

## Combinatorics: 경우의 수 세기

**조합론(Combinatorics)**은 주어진 집합에서 특정 조건에 맞는 대상의 개수나 배열의 수를 세는 수학입니다. 문제를 풀 때 **모든 경우의 수**를 살펴봐야 하는 상황에서 가장 기본이 되는 도구입니다.

> [!TIP] **실전 활용**
> - 조합의 모든 가짓수를 고려해야 한다면 **조합 알고리즘**을 사용합니다.
> - 순서가 포함된 모든 가짓수를 고려해야 한다면 **순열 알고리즘**을 사용합니다.

> [!NOTE] **조금은 가벼운 마음으로**
> 나중에 실제 문제를 풀다 보면 자연스럽게 익숙해지는 내용들입니다. 지금 당장 모든 공식이 와닿지 않아도 괜찮으니 가볍게 읽고 넘어가셔도 좋습니다. 🙂

### 💡 Why it matters (Context)

- **경우의 수**: "서울에서 부산까지 가는 경로의 수" 같은 단순 문제부터 복잡한 시나리오 계산까지.
- **최적화**: 모든 경우를 다 해보지 않아도 수학적으로 답을 미리 알 수 있어 실행 시간을 획기적으로 줄여줍니다.
- **확률**: 머신러닝이나 통계 분석에서 사건의 발생 확률을 계산하는 기본 도구입니다.

---

### 🏢 실무 사례

#### 활용 분야

- **데이터 분석**: 표본 추출(Sampling) 시 가능한 모든 샘플 조합 계산.
- **머신러닝**: 하이퍼파라미터 튜닝(Grid Search) 시 시도해야 할 모든 조합의 수.
- **슬롯머신/가챠**: 게임 확률형 아이템의 당첨 확률 설계 및 검증.
- **네트워크**: 노드 간 가능한 모든 연결 통로(Topology) 계산.
- **물류**: 창고 선반에서 물건을 배치하는 최적의 가짓수 분석.

---

## 🧮 기본 공식

### 1. Sum 1 to N (수열의 합)

1부터 $N$까지의 자연수의 합은 다음과 같습니다.
$$\sum_{i=1}^{N} i = \frac{N(N+1)}{2}$$

### 2. Factorial (팩토리얼) - $n!$

$n$ 개를 일렬로 나열하는 방법의 수.

$$n! = n \times (n-1) \times \dots \times 1$$

### 2. Permutation (순열) - $nP_r$

$n$ 개 중 $r$ 개를 선택하여 **순서 있게** 나열하는 방법.

$$nP_r = \frac{n!}{(n-r)!}$$

### 3. Combination (조합) - $nC_r$ (이항 계수)

$n$ 개 중 $r$ 개를 선택하는 방법 (**순서 무지**).

$$nC_r = \binom{n}{r} = \frac{n!}{r!(n-r)!} = \frac{nP_r}{r!}$$

---

## 🔧 효율적인 계산법 (DP 활용)

### 파스칼의 삼각형 (Pascal's Triangle)

조합에는 중요한 성질이 있습니다:

$$\binom{n}{r} = \binom{n-1}{r-1} + \binom{n-1}{r}$$

이를 이용하면 팩토리얼 계산 없이 **Dynamic Programming**으로 조합을 구할 수 있습니다. (오버플로우 방지에 유리)

```python
def get_combination_table(n):
    # dp[n][r] 테이블 만들기
    dp = [[0] * (n + 1) for _ in range(n + 1)]
    
    for i in range(n + 1):
        dp[i][0] = 1 # n개 중 0개 뽑기: 1가지
        for j in range(1, i + 1):
            if i == j:
                dp[i][j] = 1 # n개 중 n개 뽑기: 1가지
            else:
                dp[i][j] = dp[i-1][j-1] + dp[i-1][j]
    return dp
```

---

## 🎯 실전 패턴

### Pattern 1: 중복 순열 & 중복 조합
- **중복 순열 ($n^r$)**: 비밀번호 4 자리 (0~9 중복 허용)
- **중복 조합 ($nH_r = n+r-1C_r$)**: 사과, 배, 귤 중 5 개 사기 (종류별 개수만 중요)

### Pattern 2: 카탈란 수 (Catalan Number)

괄호 쌍 맞추기, 다각형 삼각형 분할 등 특정 기하학적/구조적 문제를 풀 때 사용되는 수열.

$$C_n = \frac{1}{n+1} \binom{2n}{n}$$

### Pattern 3: 포함 배제 원리 (Inclusion-Exclusion)

여러 사건이 겹칠 때 전체 개수 구하기. (A∪B = A + B - A∩B)

---

## 🚨 흔한 실수

1. **순서가 중요한지 헷갈림** ❌
    - "선택해서 나열"하면 순열(P), "그냥 선택"만 하면 조합(C)입니다.
2. **팩토리얼 오버플로우**
    - 20! 만 넘어가도 64 비트 정수 범위를 초과합니다. 큰 수의 조합을 구할 때는 반드시 중간에 나누거나 [모듈러 역원](math-modular-and-exponentiation.md) 을 사용하세요.
3. **그리드 경로 문제**
    - $(0,0)$ 에서 $(m,n)$ 까지 최단 경로의 수는 $\binom{m+n}{m}$ 입니다. 이를 모르고 DFS 로 풀면 시간이 초과될 수 있습니다.

---

## 📚 관련 문서

- [동적 계획법](../02_algorithms/dynamic-programming.md) - 파스칼의 삼각형을 활용한 이항 계수 계산의 최적화
- [백트래킹](../02_algorithms/backtracking.md) - 실제 모든 순열과 조합의 리스트를 생성하는 탐색 기법
- [나머지 연산](math-modular-and-exponentiation.md) - 거대 조합 값 계산을 위한 페르마의 소정리와 모듈러 역원
- [복잡도 분석](../00_fundamentals/complexity-and-big-o.md) - 팩토리얼($O(N!)$) 시간 복잡도의 폭발적 증가 이해
- [최적화 전략](../03_patterns/optimization.md) - 수학적 공식을 활용한 완전 탐색($O(2^N)$)의 효율적 대체
