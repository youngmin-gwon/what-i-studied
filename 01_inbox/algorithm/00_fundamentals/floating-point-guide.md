---
title: floating-point-guide
tags: [error-handling, floating-point, fundamentals, math, precision]
aliases: [부동 소수점, 수치 에러, 실수 연산, 정밀도]
date modified: 2025-12-18 15:57:24 +09:00
date created: 2025-12-18 12:00:00 +09:00
---

## Floating Point & Precision: 실수 연산의 함정

컴퓨터는 모든 숫자를 이진수(0 과 1)로 저장합니다. 하지만 $0.1$ 과 같은 십진수 실수는 이진수로 무한 소수가 되어버리기에, **피할 수 없는 정밀도 오차**가 발생합니다.

### 💡 Why it matters (Context)

- **정답 비교의 오류**: `0.1 + 0.2 == 0.3` 은 `False` 가 나올 수 있습니다.
- **오차의 누적**: 수만 번의 연산이 겹치면 미세한 오차가 결과값을 크게 틀어버립니다.
- **금융 사고**: 돈 계산에서 1 원 미만의 오차가 수백만 건 쌓이면 큰 손실이 발생합니다.

---

### 🏢 실무 사례

#### Floating Point 활용 및 대응
- **금융 시스템**: 돈 계산 시 절대 `float` 이나 `double` 을 쓰지 않고, 정수(cent 단위)로 계산하거나 **Decimal** 자료형을 사용합니다.
- **그래픽스 (OpenGL/DirectX)**: 3D 공간의 충돌 감지 시 `== 0` 대신 매우 작은 값(epsilon)보다 작은지로 판단합니다.
- **머신러닝**: 가중치(Weight) 연산 시 소수점 아래 정밀도가 모델의 성능과 수렴에 영향을 미칩니다. (FP32 vs FP16 vs INT8)
- **우주항공**: 궤도 계산 시 아주 작은 정밀도 오차가 수천 킬로미터의 오차로 이어질 수 있어 고정밀 연산을 수행합니다.

---

## 🔍 왜 오차가 발생하는가?

컴퓨터는 IEEE 754 표준에 따라 실수를 저장합니다.

- 예: `0.1` 을 이진수로 바꾸면 `0.0001100110011…` (무한 반복)
- 제한된 비트 수(예: 64 자)에 맞춰 뒷부분을 잘라내기 때문에 실제 값과 미세한 차이가 생깁니다.

---

## ✅ 알고리즘에서의 올바른 대처법

### 1. 절대 비교 대신 상대 비교

실수를 비교할 때는 `==` 을 절대 쓰지 마세요. 대신 **Epsilon($\epsilon$)**이라는 매우 작은 값을 사용합니다.

```python
# 잘못된 방법 ❌
if a + b == 0.3:
    print("정답")

# 올바른 방법 ✅
EPSILON = 1e-9  # 보통 10^-9 정도 사용
if abs((a + b) - 0.3) < EPSILON:
    print("정답")
```

### 2. 정수 연산으로 변환

가능하다면 실수를 정수로 바꿔서 계산하세요.

- **돈 계산**: 1.50 달러 → 150 센트
- **길이**: 1.25m → 125cm

### 3. 언어별 전용 라이브러리 사용
- **Python**: `decimal.Decimal`
- **Java**: `BigDecimal`
- **JavaScript**: `BigInt` (정수용), 특정 라이브러리 사용

---

## 🚨 흔한 실수 (Common Mistakes)

1. **`==` 연산자 사용** ❌
   - `if (x == y)` 는 실수에서 거의 항상 위험합니다.
2. **오차 누적 무시** ❌
   - `for _ in range(1000000): sum += 0.0001` 을 하면 결과가 정확히 `100` 이 나오지 않을 수 있습니다.
3. **루트나 나누기 시점**
   - 연산 중간에 나누기(`current / total`)를 수행하면 오차가 빨리 생깁니다. 가급적 연산의 마지막 단계에서 나누기를 하세요.

---

---

## 📚 관련 문서
- [수학적 기초](../04_math/math-modular-and-exponentiation.md) - 정수 기반 연산과 모듈러 연산
- [문제 해결 프로세스](problem-solving-process.md) - 설계 단계에서 부동 소수점 오차 고려하기
- [최적화 전략](../03_patterns/optimization.md) - 수치적 안정성과 근사 알고리즘
- [복잡도 분석](complexity-and-big-o.md) - 부동 소수점 연산의 상수 시간 복잡도
