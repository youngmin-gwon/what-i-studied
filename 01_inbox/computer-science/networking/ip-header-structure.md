---
title: ip-header-structure
tags: [header, ip, ipv4, ipv6, networking, protocol]
aliases: [IP í—¤ë”, IPv4 í—¤ë”, IPv6 í—¤ë”]
date modified: 2026-01-08 16:11:21 +09:00
date created: 2026-01-08 16:06:40 +09:00
---

## ğŸŒ ê°œìš” (Overview)

**IP (Internet Protocol)** ëŠ” ë¹„ì—°ê²°í˜•, ë¹„ì‹ ë¢°ì„± í”„ë¡œí† ì½œë¡œ **ìµœì„ í˜• (Best Effort)** ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ë¬¸ì„œì—ì„œëŠ” IPv4 ì™€ IPv6 ì˜ í—¤ë” êµ¬ì¡°ë¥¼ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.

## ğŸ“¦ IPv4 í—¤ë” êµ¬ì¡° (20~60 Bytes)

```plaintext
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version|  IHL  |    TOS (8)    |         Total Length (16)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Identification (16)      |Flags|    Fragment Offset (13) |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   TTL (8)     |  Protocol (8) |      Header Checksum (16)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Source IP Address (32)                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Destination IP Address (32)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Options (ê°€ë³€, 0~40 bytes)                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

### í•„ë“œë³„ ìƒì„¸ ì„¤ëª…

| í•„ë“œ | í¬ê¸° | ì„¤ëª… |
|------|------|------|
| **Version** | 4 bit | IP ë²„ì „ (IPv4 = 4) |
| **IHL (Header Length)** | 4 bit | í—¤ë” ê¸¸ì´ (32bit ë‹¨ìœ„, ìµœì†Œ 5 = 20 bytes) |
| **TOS (Type of Service)** | 8 bit | ì„œë¹„ìŠ¤ í’ˆì§ˆ (QoS) ìš°ì„ ìˆœìœ„ |
| **Total Length** | 16 bit | í—¤ë” + ë°ì´í„° ì „ì²´ ê¸¸ì´ (ìµœëŒ€ 65,535 bytes) |
| **Identification** | 16 bit | ë‹¨í¸í™”ëœ íŒ¨í‚·ë“¤ì´ ê°™ì€ ë°ì´í„°ê·¸ë¨ì¸ì§€ ì‹ë³„ |
| **Flags** | 3 bit | ë‹¨í¸í™” ì œì–´ í”Œë˜ê·¸ |
| **Fragment Offset** | 13 bit | ì¡°ê°ì˜ ì›ë˜ ìœ„ì¹˜ (8 byte ë‹¨ìœ„) |
| **TTL (Time To Live)** | 8 bit | íŒ¨í‚· ìˆ˜ëª… (ë¼ìš°í„° í†µê³¼ ì‹œ 1 ê°ì†Œ, 0 ì´ë©´ íê¸°) |
| **Protocol** | 8 bit | ìƒìœ„ ê³„ì¸µ í”„ë¡œí† ì½œ |
| **Header Checksum** | 16 bit | í—¤ë” ì˜¤ë¥˜ ê²€ì‚¬ |
| **Source IP** | 32 bit | ì¶œë°œì§€ IP ì£¼ì†Œ |
| **Destination IP** | 32 bit | ëª©ì ì§€ IP ì£¼ì†Œ |

### Flags í•„ë“œ

```plaintext
 0   1   2
+---+---+---+
| R | DF| MF|
+---+---+---+
```

| í”Œë˜ê·¸ | ì´ë¦„ | ì„¤ëª… |
|--------|------|------|
| **R** | Reserved | ì˜ˆì•½ (í•­ìƒ 0) |
| **DF** | Don't Fragment | 1 = ë‹¨í¸í™” ê¸ˆì§€ |
| **MF** | More Fragments | 1 = ë” ë§ì€ ì¡°ê° ì¡´ì¬, 0 = ë§ˆì§€ë§‰ ì¡°ê° |

### Protocol ë²ˆí˜¸

| ë²ˆí˜¸ | í”„ë¡œí† ì½œ |
|------|----------|
| 1 | **ICMP** |
| 6 | **TCP** |
| 17 | **UDP** |
| 41 | IPv6 |
| 47 | GRE |
| 50 | ESP |
| 51 | AH |

---

## ğŸ”¢ IPv4 ì£¼ì†Œ í´ë˜ìŠ¤

| í´ë˜ìŠ¤ | ë²”ìœ„ | ê¸°ë³¸ ë§ˆìŠ¤í¬ | íŠ¹ì§• |
|:------:|------|-------------|------|
| **A** | 0.0.0.0 ~ 127.255.255.255 | /8 | ëŒ€ê·œëª¨ (0 ìœ¼ë¡œ ì‹œì‘) |
| **B** | 128.0.0.0 ~ 191.255.255.255 | /16 | ì¤‘ê·œëª¨ (10 ìœ¼ë¡œ ì‹œì‘) |
| **C** | 192.0.0.0 ~ 223.255.255.255 | /24 | ì†Œê·œëª¨ (110 ìœ¼ë¡œ ì‹œì‘) |
| **D** | 224.0.0.0 ~ 239.255.255.255 | - | ë©€í‹°ìºìŠ¤íŠ¸ |
| **E** | 240.0.0.0 ~ 255.255.255.255 | - | ì˜ˆì•½ (ì‹¤í—˜ìš©) |

### ì‚¬ì„¤ IP (Private IP)

ì¸í„°ë„·ì—ì„œ ë¼ìš°íŒ…ë˜ì§€ ì•ŠëŠ” ë‚´ë¶€ìš© ì£¼ì†Œì…ë‹ˆë‹¤.

| í´ë˜ìŠ¤ | ì‚¬ì„¤ IP ë²”ìœ„ |
|--------|-------------|
| A | 10.0.0.0/8 |
| B | 172.16.0.0/12 |
| C | 192.168.0.0/16 |

---

## ğŸ”· IPv6 í—¤ë” êµ¬ì¡° (ê³ ì • 40 Bytes)

IPv4 ì˜ ì£¼ì†Œ ê³ ê°ˆ, ë³´ì•ˆì„±, QoS ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.

```plaintext
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version| Traffic Class |           Flow Label                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload Length        |  Next Header  |   Hop Limit   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                      Source Address (128 bit)                 |
+                                                               +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                   Destination Address (128 bit)               |
+                                                               +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

### í•„ë“œë³„ ì„¤ëª…

| í•„ë“œ                      | í¬ê¸°      | ì„¤ëª…                          |
| ----------------------- | ------- | --------------------------- |
| **Version**             | 4 bit   | IP ë²„ì „ (IPv6 = 6)            |
| **Traffic Class**       | 8 bit   | ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ (QoS)               |
| **Flow Label**          | 20 bit  | íŒ¨í‚· íë¦„ ì‹ë³„ (ì‹¤ì‹œê°„ ì²˜ë¦¬ ì§€ì›)        |
| **Payload Length**      | 16 bit  | í—¤ë” ì œì™¸ ë°ì´í„° ê¸¸ì´                |
| **Next Header**         | 8 bit   | ë‹¤ìŒ í—¤ë” íƒ€ì… (í™•ì¥ í—¤ë” ë˜ëŠ” ìƒìœ„ í”„ë¡œí† ì½œ) |
| **Hop Limit**           | 8 bit   | TTL ê³¼ ë™ì¼ (0 ì´ë©´ íê¸°)          |
| **Source Address**      | 128 bit | ì¶œë°œì§€ ì£¼ì†Œ                      |
| **Destination Address** | 128 bit | ëª©ì ì§€ ì£¼ì†Œ                      |

---

## ğŸ†š IPv4 vs IPv6 ë¹„êµ

| íŠ¹ì„± | IPv4 | IPv6 |
|------|------|------|
| **ì£¼ì†Œ ê¸¸ì´** | 32 bit | **128 bit** |
| **í‘œê¸°ë²•** | 10 ì§„ìˆ˜ (.) | 16 ì§„ìˆ˜ (:) |
| **í—¤ë” í¬ê¸°** | 20~60 bytes | **ê³ ì • 40 bytes** |
| **ì£¼ì†Œ ê°œìˆ˜** | ì•½ 43 ì–µ ê°œ | 340 ê°„ ê°œ ì´ìƒ |
| **ë³´ì•ˆ** | ì„ íƒ (IPSec) | **ê¸°ë³¸ ë‚´ì¥** |
| **ë¸Œë¡œë“œìºìŠ¤íŠ¸** | ìˆìŒ | **ì—†ìŒ** (ë©€í‹°ìºìŠ¤íŠ¸ë¡œ ëŒ€ì²´) |
| **ë‹¨í¸í™”** | ë¼ìš°í„°ì—ì„œ ê°€ëŠ¥ | **ì†¡ì‹  ë…¸ë“œì—ì„œë§Œ** |

### IPv6 ì£¼ì†Œ ìœ í˜•

| ìœ í˜• | ì„¤ëª… |
|------|------|
| **ìœ ë‹ˆìºìŠ¤íŠ¸ (Unicast)** | 1:1 í†µì‹  |
| **ë©€í‹°ìºìŠ¤íŠ¸ (Multicast)** | 1:N í†µì‹  |
| **ì• ë‹ˆìºìŠ¤íŠ¸ (Anycast)** | 1:1, ê°€ì¥ ê°€ê¹Œìš´ ë…¸ë“œ |

>ë¸Œë¡œë“œìºìŠ¤íŠ¸ëŠ” IPv6 ì—ì„œ ì‚­ì œë¨ (ë©€í‹°ìºìŠ¤íŠ¸ë¡œ ëŒ€ì²´)

---

## ğŸ“¦ IP ë‹¨í¸í™” (Fragmentation)

MTU (Maximum Transmission Unit)ë³´ë‹¤ í° íŒ¨í‚·ì„ ë¶„í• í•©ë‹ˆë‹¤.

```mermaid
graph LR
    subgraph "ì›ë³¸ íŒ¨í‚· (3000 bytes)"
        O[IP Header + Data 3000B]
    end
    
    subgraph "ë‹¨í¸í™” (MTU=1500)"
        F1[IP Header + Data 1480B<br/>Offset=0, MF=1]
        F2[IP Header + Data 1480B<br/>Offset=185, MF=1]
        F3[IP Header + Data 40B<br/>Offset=370, MF=0]
    end
    
    O --> F1
    O --> F2
    O --> F3
```

**Fragment Offset ê³„ì‚°**: ì› ìœ„ì¹˜ / 8

## ğŸ”— ì—°ê²° ë¬¸ì„œ (Related Documents)

- [[osi-7-layer-model]] - OSI 7 ê³„ì¸µ ëª¨ë¸
- [[tcp-ip-model]] - TCP/IP 4 ê³„ì¸µ
- [[tcp-udp-protocols]] - TCP/UDP í”„ë¡œí† ì½œ
- [[icmp-protocol]] - ICMP í”„ë¡œí† ì½œ
- [[ip-addressing]] - IP ì£¼ì†Œ ì²´ê³„
