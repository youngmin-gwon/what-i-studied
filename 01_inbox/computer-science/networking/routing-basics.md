---
title: Routing Basics
tags: [networking, routing, gateway, router, computer-science]
aliases: [ë¼ìš°íŒ…, ê²½ë¡œ ì§€ì •, IP Routing]
date modified: 2025-12-20 00:02:18 +09:00
date created: 2025-12-20 00:02:18 +09:00
---

## ğŸŒ ê°œìš” (Overview)

**ë¼ìš°íŒ… (Routing)** ì€ [[ip-addressing|IP íŒ¨í‚·]]ì´ ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ê¹Œì§€ ë„ë‹¬í•˜ëŠ” ìµœì ì˜ ê²½ë¡œë¥¼ ê²°ì •í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì¸í„°ë„·ì˜ "êµí†µ ê²½ì°°" ì—­í• ì„ í•˜ì—¬ íŒ¨í‚·ì„ ì˜¬ë°”ë¥¸ ë°©í–¥ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ¯ ë¼ìš°íŒ…ì˜ ëª©ì  (Purpose)

1. **ê²½ë¡œ ê²°ì •**: íŒ¨í‚·ì´ ëª©ì ì§€ë¡œ ê°€ëŠ” ìµœì  ê²½ë¡œ ì„ íƒ
2. **ë„¤íŠ¸ì›Œí¬ ê°„ ì—°ê²°**: ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒí˜¸ ì—°ê²°
3. **ë¶€í•˜ ë¶„ì‚°**: ì—¬ëŸ¬ ê²½ë¡œë¥¼ í†µí•´ íŠ¸ë˜í”½ ë¶„ì‚°
4. **ì¥ì•  ëŒ€ì‘**: ê²½ë¡œ ì¥ì•  ì‹œ ëŒ€ì²´ ê²½ë¡œ ìë™ ì„ íƒ

## ğŸ“Š ë¼ìš°íŒ… í…Œì´ë¸” (Routing Table)

ê° ë¼ìš°í„°ì™€ í˜¸ìŠ¤íŠ¸ëŠ” ë¼ìš°íŒ… ë°ì´ë¸”ì„ ìœ ì§€í•©ë‹ˆë‹¤.

```bash
# ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸
ip route          # ê¶Œì¥ (Linux)
route -n          # ìˆ«ì í˜•ì‹
netstat -rn       # êµ¬ì‹
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
Destination     Gateway         Genmask         Flags  Iface
default         192.168.1.1     0.0.0.0         UG     eth0
192.168.1.0     0.0.0.0         255.255.255.0   U      eth0
172.16.0.0      192.168.1.254   255.255.0.0     UG     eth0
```

### í…Œì´ë¸” í•„ë“œ ì„¤ëª…

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **Destination** | ëª©ì ì§€ ë„¤íŠ¸ì›Œí¬ | `192.168.1.0` |
| **Gateway** | ë‹¤ìŒ í™‰ ë¼ìš°í„° | `192.168.1.1` |
| **Genmask** | ì„œë¸Œë„· ë§ˆìŠ¤í¬ | `255.255.255.0` |
| **Flags** | ê²½ë¡œ ìƒíƒœ | `U`=Up, `G`=Gateway |
| **Iface** | ì¶œë ¥ ì¸í„°í˜ì´ìŠ¤ | `eth0` |

## ğŸ  ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ (Default Gateway)

**ì •ì˜**: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ì™¸ë¶€ë¡œ ë‚˜ê°€ëŠ” ëª¨ë“  íŒ¨í‚·ì´ ì „ë‹¬ë˜ëŠ” ë¼ìš°í„°ì…ë‹ˆë‹¤.

```mermaid
graph LR
    PC[PC<br/>192.168.1.100] -->|ëª¨ë“  ì™¸ë¶€ íŠ¸ë˜í”½| GW[Gateway<br/>192.168.1.1]
    GW --> Internet[ì¸í„°ë„·]
    
    PC -->|ë‚´ë¶€ íŠ¸ë˜í”½| Local[Local Network<br/>192.168.1.x]
```

**ì„¤ì •**:

```bash
# Linux
sudo ip route add default via 192.168.1.1

# í™•ì¸
ip route | grep default
# default via 192.168.1.1 dev eth0
```

**ê°€ì •ìš© ë„¤íŠ¸ì›Œí¬ ì˜ˆ**:
- PC IP: `192.168.1.100`
- Router (Gateway): `192.168.1.1`
- PCê°€ `8.8.8.8`ì— ì ‘ì† â†’ ê²Œì´íŠ¸ì›¨ì´ë¡œ ì „ë‹¬ â†’ ì¸í„°ë„·

## ğŸ” ë¼ìš°íŒ… ê²°ì • ê³¼ì • (Routing Decision)

```mermaid
flowchart TD
    Start[íŒ¨í‚· ìˆ˜ì‹ :<br/>ëª©ì ì§€ IP] --> Local{ë¡œì»¬<br/>ë„¤íŠ¸ì›Œí¬?}
    Local -->|Yes| Direct[ì§ì ‘ ì „ë‹¬]
    Local -->|No| Table{ë¼ìš°íŒ…<br/>í…Œì´ë¸” ê²€ìƒ‰}
    Table --> Match{ë§¤ì¹­ë˜ëŠ”<br/>ê²½ë¡œ ìˆìŒ?}
    Match -->|Yes| Forward[í•´ë‹¹ ê²Œì´íŠ¸ì›¨ì´ë¡œ<br/>ì „ë‹¬]
    Match -->|No| Default{ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´<br/>ì„¤ì •ë¨?}
    Default -->|Yes| Gateway[ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ë¡œ<br/>ì „ë‹¬]
    Default -->|No| Drop[íŒ¨í‚· íê¸°<br/>Network Unreachable]
```

**ì˜ˆì‹œ**: PC (`192.168.1.100`)ì—ì„œ `8.8.8.8`ë¡œ íŒ¨í‚· ì „ì†¡
1. ëª©ì ì§€ `8.8.8.8`ì´ ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ (`192.168.1.0/24`)ì— ì†í•˜ëŠ”ê°€? â†’ No
2. ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ `8.8.0.0/16` ê²½ë¡œ ìˆëŠ”ê°€? â†’ No
3. ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ (`192.168.1.1`)ë¡œ ì „ë‹¬

## ğŸ“ ì •ì  ë¼ìš°íŒ… (Static Routing)

ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì„¤ì •í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### ë¼ìš°íŠ¸ ì¶”ê°€

```bash
# ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ ì¶”ê°€
sudo ip route add default via 192.168.1.1

# íŠ¹ì • ë„¤íŠ¸ì›Œí¬ ë¼ìš°íŠ¸ ì¶”ê°€
sudo ip route add 10.0.0.0/8 via 192.168.1.254

# íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë¡œ ì§ì ‘ ë¼ìš°íŒ…
sudo ip route add 172.16.0.0/12 dev eth1
```

### ë¼ìš°íŠ¸ ì‚­ì œ

```bash
sudo ip route del default
sudo ip route del 10.0.0.0/8
```

### ë¼ìš°íŠ¸ ìˆ˜ì •

```bash
sudo ip route change 10.0.0.0/8 via 192.168.1.200
```

### ì¥ë‹¨ì 

| ì¥ì  | ë‹¨ì  |
|------|------|
| âœ… ê°„ë‹¨í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥ | âŒ í™•ì¥ì„± ë‚®ìŒ |
| âœ… ë³´ì•ˆ (ì™¸ë¶€ ê²½ë¡œ ê´‘ê³  ì°¨ë‹¨) | âŒ ì¥ì•  ëŒ€ì‘ ìˆ˜ë™ |
| âœ… ëŒ€ì—­í­ ë‚­ë¹„ ì—†ìŒ | âŒ ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ ë¶€ì í•© |

**ì‚¬ìš© ì‚¬ë¡€**:
- ì†Œê·œëª¨ ë„¤íŠ¸ì›Œí¬ (< 10ê°œ ë¼ìš°í„°)
- ê³ ì •ëœ í† í´ë¡œì§€
- ë³´ì•ˆ ì¤‘ì‹¬ í™˜ê²½

## ğŸ¤– ë™ì  ë¼ìš°íŒ… (Dynamic Routing)

ë¼ìš°í„°ê°€ í”„ë¡œí† ì½œì„ í†µí•´ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ í•™ìŠµí•˜ê³  êµí™˜í•©ë‹ˆë‹¤.

### ì£¼ìš” í”„ë¡œí† ì½œ

| í”„ë¡œí† ì½œ | íƒ€ì… | ë©”íŠ¸ë¦­ | íŠ¹ì§• |
|---------|------|--------|------|
| **RIP** (Routing Information Protocol) | Distance-Vector | Hop Count | ê°„ë‹¨, ì†Œê·œëª¨, ìµœëŒ€ 15í™‰ |
| **OSPF** (Open Shortest Path First) | Link-State | Cost (ëŒ€ì—­í­) | ëŒ€ê·œëª¨, ë¹ ë¥¸ ìˆ˜ë ´ |
| **BGP** (Border Gateway Protocol) | Path-Vector | AS Path | ì¸í„°ë„· ë°±ë³¸, ISP ê°„ |
| **EIGRP** (Enhanced Interior Gateway Routing Protocol) | Hybrid | ë³µí•© | Cisco ì „ìš©, ë¹ ë¦„ |

### ë™ì‘ ë°©ì‹

```mermaid
graph LR
    R1[Router 1] <-->|ê²½ë¡œ ì •ë³´ êµí™˜| R2[Router 2]
    R2 <--> R3[Router 3]
    R3 <--> R4[Router 4]
    R4 <--> R1
    
    R1 -.í•™ìŠµ.-> DB1[(ë¼ìš°íŒ…<br/>í…Œì´ë¸”)]
    R2 -.í•™ìŠµ.-> DB2[(ë¼ìš°íŒ…<br/>í…Œì´ë¸”)]
```

### ì¥ë‹¨ì 

| ì¥ì  | ë‹¨ì  |
|------|------|
| âœ… ìë™ ì¥ì•  ë³µêµ¬ | âŒ ë³µì¡í•œ ì„¤ì • |
| âœ… í™•ì¥ì„± ìš°ìˆ˜ | âŒ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš© ì¦ê°€ |
| âœ… ìµœì  ê²½ë¡œ ìë™ ì„ íƒ | âŒ ë³´ì•ˆ ìœ„í˜‘ (ê²½ë¡œ í•˜ì´ì¬í‚¹) |

## ğŸŒ IP í¬ì›Œë”© (IP Forwarding)

Linux í˜¸ìŠ¤íŠ¸ë¥¼ ë¼ìš°í„°ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ IP í¬ì›Œë”©ì„ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.

### ì¼ì‹œì  í™œì„±í™”

```bash
# IPv4 í¬ì›Œë”© í™œì„±í™”
sudo sysctl -w net.ipv4.ip_forward=1

# ë˜ëŠ”
echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward

# í™•ì¸
cat /proc/sys/net/ipv4/ip_forward  # 1ì´ë©´ í™œì„±í™”
```

### ì˜êµ¬ í™œì„±í™”

```bash
# /etc/sysctl.conf í¸ì§‘
sudo nano /etc/sysctl.conf

# ë‹¤ìŒ ì¤„ ì¶”ê°€ ë˜ëŠ” ì£¼ì„ í•´ì œ
net.ipv4.ip_forward = 1

# ì ìš©
sudo sysctl -p
```

### ì‹¤ìŠµ: Linuxë¥¼ ë¼ìš°í„°ë¡œ ì‚¬ìš©

```bash
# ì‹œë‚˜ë¦¬ì˜¤: Linux ì„œë²„ê°€ ë‘ ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì— ìˆìŒ
# eth0: 192.168.1.0/24
# eth1: 10.0.0.0/24

# 1. IP í¬ì›Œë”© í™œì„±í™”
sudo sysctl -w net.ipv4.ip_forward=1

# 2. ì–‘ìª½ ë„¤íŠ¸ì›Œí¬ì˜ PCì—ì„œ ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •
# 192.168.1.100 â†’ ê²Œì´íŠ¸ ì›¨ì´: 192.168.1.1 (Linux eth0)
# 10.0.0.100 â†’ ê²Œì´íŠ¸ì›¨ì´: 10.0.0.1 (Linux eth1)

# 3. Linuxì— NAT ì„¤ì • (í•„ìš” ì‹œ)
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
```

## ğŸ› ï¸ ë¼ìš°íŒ… ì§„ë‹¨ ë„êµ¬ (Troubleshooting Tools)

### ping

ì—°ê²° í…ŒìŠ¤íŠ¸ (ICMP Echo):
```bash
ping 8.8.8.8

# Windows: 4ë²ˆë§Œ ì „ì†¡
ping -c 4 8.8.8.8  # Linux
```

### traceroute / tracepath

ê²½ë¡œ ì¶”ì :
```bash
# ëª©ì ì§€ê¹Œì§€ ê±°ì³ê°€ëŠ” ë¼ìš°í„° í‘œì‹œ
traceroute google.com

# Windows
tracert google.com

# Linux (root ë¶ˆí•„ìš”)
tracepath google.com
```

**ì¶œë ¥ ì˜ˆ**:

```plaintext
 1  192.168.1.1 (192.168.1.1)      1.234 ms
 2  10.0.0.1 (10.0.0.1)            5.678 ms
 3  172.16.0.1 (172.16.0.1)        10.234 ms
 ...
```

### mtr (My TraceRoute)

ì‹¤ì‹œê°„ traceroute + ping:
```bash
mtr google.com

# í†µê³„ ëª¨ë“œ
mtr --report google.com
```

### ip route get

íŠ¹ì • ëª©ì ì§€ì˜ ë¼ìš°íŒ… ê²½ë¡œ í™•ì¸:
```bash
ip route get 8.8.8.8
# 8.8.8.8 via 192.168.1.1 dev eth0 src 192.168.1.100
```

## ğŸ’¡ ì‹¤ë¬´ í™œìš© (Practical Examples)

### ë“€ì–¼ í™ˆ (Dual-Homed) ì„¤ì •

ë‘ ê°œì˜ ì¸í„°ë„· ì—°ê²°ì´ ìˆëŠ” ê²½ìš°:
```bash
# ì£¼ ì—°ê²°: ISP1 (eth0)
sudo ip route add default via 192.168.1.1 dev eth0 metric 100

# ë°±ì—… ì—°ê²°: ISP2 (eth1)
sudo ip route add default via 10.0.0.1 dev eth1 metric 200

# metricì´ ë‚®ì„ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ ë†’ìŒ
# ISP1 ì¥ì•  ì‹œ ìë™ìœ¼ë¡œ ISP2 ì‚¬ìš©
```

### VPN ë¼ìš°íŒ…

```bash
# VPNì„ í†µí•´ íŠ¹ì • ë„¤íŠ¸ì›Œí¬ë§Œ ë¼ìš°íŒ…
sudo ip route add 10.10.0.0/16 via 10.8.0.1 dev tun0
```

### ë¸”ë™í™€ ë¼ìš°ë¸Œ (Blackhole Route)

íŠ¹ì • IP ì°¨ë‹¨:
```bash
sudo ip route add blackhole 192.0.2.0/24
# í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ë¡œ ê°€ëŠ” ëª¨ë“  íŒ¨í‚· íê¸°
```

## ğŸ”— ì—°ê²° ë¬¸ì„œ (Related Documents)

- [[ip-addressing]] - IP ì£¼ì†Œì™€ ì„œë¸Œë„·
- [[tcp-ip-model]] - ë¼ìš°íŒ…ì´ ë™ì‘í•˜ëŠ” ì¸í„°ë„· ê³„ì¸µ
- [[dns-fundamentals]] - DNS ì¿¼ë¦¬ì˜ ë¼ìš°íŒ…
