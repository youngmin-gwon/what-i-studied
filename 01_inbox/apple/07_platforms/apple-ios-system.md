---
title: apple-ios-system
tags: [apple, ios, system, springboard, jetsam, memory]
aliases: []
date modified: 2025-12-17 23:30:00 +09:00
date created: 2025-12-17 23:30:00 +09:00
---

## iOS System Internals

iOSëŠ” "ì œì•½ì˜ ì˜ˆìˆ "ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì—ê²Œ ìµœê³ ì˜ ë°˜ì‘ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•´, ì‹œìŠ¤í…œì€ ì•±ì—ê²Œ ê°€í˜¹í•  ì •ë„ë¡œ ì—„ê²©í•œ ë©”ëª¨ë¦¬/CPU ì œí•œì„ ë‘¡ë‹ˆë‹¤.
ì´ ê·œì¹™ì„ ì§‘í–‰í•˜ëŠ” **SpringBoard**ì™€ **Jetsam**ì„ ì´í•´í•´ì•¼ ì•±ì´ ì£½ì§€ ì•Šê³  ì‚´ì•„ë‚¨ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ’¡ ì™œ ì´ê²ƒì„ ì•Œì•„ì•¼ í•˜ë‚˜ìš”? (Context)
- **OOM (Out Of Memory)**: "ë©”ëª¨ë¦¬ ê²½ê³ ë„ ì•ˆ ë°›ê³  ê·¸ëƒ¥ êº¼ì¡Œì–´ìš”." -> 100% Jetsamì´ ì£½ì¸ ê²ë‹ˆë‹¤. Jetsamì´ ëˆ„êµ¬ë¥¼ ë¨¼ì € ì£½ì´ëŠ”ì§€(Priority) ì•Œì•„ì•¼ ë°©ì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Touch Responsiveness**: ì‚¬ìš©ìê°€ í™”ë©´ì„ í„°ì¹˜í–ˆì„ ë•Œ, ê·¸ ì´ë²¤íŠ¸ê°€ ë‚´ ë²„íŠ¼ì— ë„ë‹¬í•˜ê¸°ê¹Œì§€ì˜ ì—¬ì •(IOKit -> SpringBoard -> App)ì„ ì•Œë©´ "í„°ì¹˜ ì”¹í˜" í˜„ìƒì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Background Execution**: "ìœ íŠœë¸ŒëŠ” ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ ë˜ëŠ”ë° ì™œ ë‚´ ì•±ì€ ì•ˆ ë¼ìš”?" -> iOSì˜ ë°±ê·¸ë¼ìš´ë“œ ì •ì±…ì€ ì² ì €í•œ í—ˆê°€ì œì…ë‹ˆë‹¤.

---

### ğŸ“± SpringBoard (The Shell)

Macì— `Finder`ì™€ `WindowServer`ê°€ ìˆë‹¤ë©´, iOSì—ëŠ” **SpringBoard**ê°€ ìˆìŠµë‹ˆë‹¤.
í™ˆ í™”ë©´ì„ ë³´ì—¬ì£¼ëŠ” ì•±ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì‹¤ì œë¡œëŠ” **iOSì˜ Window Managerì´ì Process Manager**ì…ë‹ˆë‹¤.

#### ì—­í• 
1. **App Launch**: ì•± ì•„ì´ì½˜ì„ ëˆ„ë¥´ë©´ `runningboardd`ì— ìš”ì²­í•˜ì—¬ ì•± í”„ë¡œì„¸ìŠ¤ë¥¼ í¬í¬(fork)í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.
2. **Window Management**: ëª¨ë“  ì•±ì˜ UIWindowëŠ” ì‚¬ì‹¤ SpringBoardê°€ ê´€ë¦¬í•˜ëŠ” ìº”ë²„ìŠ¤ ìœ„ì— ê·¸ë ¤ì§‘ë‹ˆë‹¤. (Inter-process communication via Render Server)
3. **Event Routing**: í•˜ë“œì›¨ì–´ í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì„œ í˜„ì¬ í™œì„±í™”ëœ ì•±ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

---

### ğŸ§¹ Jetsam (The Reaper)

iOSëŠ” ìŠ¤ì™‘(Disk Swap)ì´ ì—†ìŠµë‹ˆë‹¤. ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ë©´ ëˆ„êµ°ê°€ë¥¼ ì£½ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì €ìŠ¹ì‚¬ìê°€ ë°”ë¡œ **Jetsam**ì…ë‹ˆë‹¤.

#### Jetsam Priority Queue
ë ˆë“œ ë„·í”Œë¦­ìŠ¤ ê²Œì„(ì˜¤ì§•ì–´ ê²Œì„)ê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ìˆœì„œëŒ€ë¡œ ì£½ìŠµë‹ˆë‹¤.

1. **Background Suspended**: ë°±ê·¸ë¼ìš´ë“œì— ìˆëŠ”ë° ì•„ë¬´ ì¼ë„ ì•ˆ í•˜ëŠ” ì•±. (ê°€ì¥ ë¨¼ì € ì‚¬ë§ ğŸ’€)
2. **Background Running**: ìŒì•… ì¬ìƒ, ìœ„ì¹˜ ì¶”ì  ì¤‘ì¸ ì•±.
3. **Foreground Inactive**: ì „í™”ê°€ ì™€ì„œ ì ê¹ ë©ˆì¶˜ ìƒíƒœ.
4. **Foreground Active**: ì‚¬ìš©ìê°€ ì§€ê¸ˆ ì“°ê³  ìˆëŠ” ì•±. (ì—¬ê¸°ê¹Œì§€ ì£½ìœ¼ë©´ ì‹œìŠ¤í…œ ë¦¬ë¶€íŒ…)
5. **System Services**: SpringBoard, telephony ë“±.

**ë°©ì–´ ì „ëµ**:
- `applicationDidEnterBackground`ì—ì„œ 5ì´ˆ ì•ˆì— ëª¨ë“  ì‘ì—…ì„ ëë‚´ê³  ë©”ëª¨ë¦¬ë¥¼ ìµœëŒ€í•œ ë¹„ìš°ì„¸ìš”. ê·¸ë˜ì•¼ Suspended ìƒíƒœì—ì„œ ì˜¤ë˜ ì‚´ì•„ë‚¨ìŠµë‹ˆë‹¤.

---

### ğŸ‘† Touch Event Loop

í„°ì¹˜ê°€ ë°œìƒí•´ì„œ `UIButton.action`ì´ ë¶ˆë¦¬ê¸°ê¹Œì§€ì˜ ê³¼ì •:

1. **Hardware (Capacitive Sensor)**: ì „ì•• ë³€í™” ê°ì§€.
2. **IOKit (Kernel)**: í•˜ë“œì›¨ì–´ ì¸í„°ëŸ½íŠ¸ë¥¼ `IOHIDEvent`ë¡œ ë³€í™˜.
3. **SpringBoard (Backboardd)**: ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì„œ "ì§€ê¸ˆ ì¼œì ¸ ìˆëŠ” ì•±ì´ ëˆ„êµ¬ì§€?" íŒë‹¨.
4. **IPC (Mach Message)**: ì•±ì˜ ë©”ì¸ ëŸ°ë£¨í”„ë¡œ ë©”ì‹œì§€ ì „ë‹¬.
5. **UIKit (`UIApplication`)**: `UIEvent` ê°ì²´ ìƒì„±.
6. **Hit Testing**: `window.hitTest()` -> `view.pointInside()` ì¬ê·€ í˜¸ì¶œë¡œ í„°ì¹˜ëœ ë·° ì°¾ê¸°.
7. **Responder Chain**: ë²„íŠ¼ì´ ì²˜ë¦¬ ì•ˆ í•˜ë©´ ìƒìœ„ ë·°ë¡œ ì „ë‹¬.

### ë” ë³´ê¸°
- [[apple-app-lifecycle-and-ui]] - ì•± ìƒëª…ì£¼ê¸°
- [[apple-memory-management]] - ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²•
