---
title: test principles
tags: [concept, test]
aliases: []
date modified: 2024-12-18 12:29:29 +09:00
date created: 2024-12-18 11:57:07 +09:00
---

## 단위 테스트는 이상적으로 테스트 대상 (=단위) 이 의존하는 것에 대해 독립적 (independent) 으로 작성되어야 한다

- 테스트는 깔끔함과 단정함을 유지해야 함. 즉, 확실히 한 대강에 집중한 상태여야 하며, 환경과 다른 개발자들에게서 독립적인 상태를 유지해야 함
- 독립적이라는 것은 어떤 테스트도 다른 테스트에 의존하지 않는 것을 의미
- 어느 순서로든, 어떤 개별 테스트라도 실행해 볼 수 있어야 함
- 모든 테스트는 섬이어야 한다
- 모든 테스트를 의존하는 것으로 격리하기 위해 의존체를 `Test Double` 로 만든다

## 준비하고, 시작하고, 단언하라

- `Arrange - Act - Assert`, `AAA 테스트` 를 따르도록 코드 작성하라
- Given, When, Then 즉 주어진 상황에서 어떤 일이 발생했을 때, 특정 결과를 기다린다
- 세 영역 중 하나가 비대하다고 느껴진다면, 너무 많은 것을 한꺼번에 검사하는 테스트일 가능성이 높다

## 구현이 아닌 동작을 테스트 하라

- 지극히 사소한 변경 마저도 테스트를 실패하게 만들면 안된다
- 테스트는 오직 한가지만 검사해야 하고, 그 의도를 명확하게 전달하도록 작성되어야 한다

## 언제 상태검증, 언제 행위검증?

- 행위 검증의 경우 특정 메소드 호출과 같은 것을 검증하기 때문에 구현에 굉장히 의존적임
  - 프로덕션 코드가 변경되면 테스트코드가 변경될 확률이 높아진다는 의미
- 대부분의 경우 상태검증을 사용하는 경우가 좋다
- 상태 검증을 하기 힘든 경우 (ex. 알람) 에는 행위검증을 사용하는 것도 생각해볼 수 있는 방법이다
